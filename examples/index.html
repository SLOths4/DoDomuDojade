
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sloths4.github.io/DoDomuDojade/examples/">
      
      
        <link rel="prev" href="../architecture/">
      
      
        <link rel="next" href="../layers/application/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Przyk≈Çady - DoDomuDojade - Dokumentacja</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="light" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#praktyczne-przykady-i-wzorce" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DoDomuDojade - Dokumentacja" class="md-header__button md-logo" aria-label="DoDomuDojade - Dokumentacja" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DoDomuDojade - Dokumentacja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Przyk≈Çady
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="light" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="dark" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DoDomuDojade - Dokumentacja" class="md-nav__button md-logo" aria-label="DoDomuDojade - Dokumentacja" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DoDomuDojade - Dokumentacja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architektura
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Przyk≈Çady
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Przyk≈Çady
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#przykad-1-tworzenie-ogoszenia" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìù Przyk≈Çad 1: Tworzenie Og≈Çoszenia
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìù Przyk≈Çad 1: Tworzenie Og≈Çoszenia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-nowy-admin-chce-stworzyc-ogoszenie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: Nowy admin chce stworzyƒá og≈Çoszenie
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-1-controller-presentation-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 1: Controller (Presentation Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-2-use-case-application-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 2: Use Case (Application Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-3-factory-infrastructure-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 3: Factory (Infrastructure Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-4-domain-entity-domain-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 4: Domain Entity (Domain Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-5-repository-infrastructure-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 5: Repository (Infrastructure Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-6-dto-application-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 6: DTO (Application Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Response
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-2-zatwierdzanie-ogoszenia" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑ Przyk≈Çad 2: Zatwierdzanie Og≈Çoszenia
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîÑ Przyk≈Çad 2: Zatwierdzanie Og≈Çoszenia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-admin-zatwierdza-oczekujace-ogoszenie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: Admin zatwierdza oczekujƒÖce og≈Çoszenie
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-entity-business-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain Entity (Business Logic!)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-3-rejestracja-uzytkownika" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîê Przyk≈Çad 3: Rejestracja U≈ºytkownika
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîê Przyk≈Çad 3: Rejestracja U≈ºytkownika">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-object-z-walidacja" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Object z WalidacjƒÖ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-4-integracja-z-external-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìù Przyk≈Çad 4: Integracja z External API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìù Przyk≈Çad 4: Integracja z External API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-cli-command-pobiera-sowo-dnia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: CLI Command pobiera s≈Çowo dnia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-command-presentation-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Command (Presentation Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        External Service
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-5-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ°Ô∏è Przyk≈Çad 5: Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ°Ô∏è Przyk≈Çad 5: Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hierarchia-wyjatkow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hierarchia WyjƒÖtk√≥w
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-comprehensive-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller - Comprehensive Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagram-flow-kompletny-scenariusz" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Diagram Flow - Kompletny Scenariusz
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#szybka-referencja-patternow" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Szybka Referencja Pattern√≥w
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ Szybka Referencja Pattern√≥w">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tworzenie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tworzenie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zapisanie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zapisanie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pobranie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pobranie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformacja-do-dto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transformacja do DTO
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obsuga-bedow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Obs≈Çuga B≈Çƒôd√≥w
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Warstwy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Warstwy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aplikacji
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domeny
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastruktury
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#przykad-1-tworzenie-ogoszenia" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìù Przyk≈Çad 1: Tworzenie Og≈Çoszenia
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìù Przyk≈Çad 1: Tworzenie Og≈Çoszenia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-nowy-admin-chce-stworzyc-ogoszenie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: Nowy admin chce stworzyƒá og≈Çoszenie
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-1-controller-presentation-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 1: Controller (Presentation Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-2-use-case-application-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 2: Use Case (Application Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-3-factory-infrastructure-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 3: Factory (Infrastructure Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-4-domain-entity-domain-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 4: Domain Entity (Domain Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-5-repository-infrastructure-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 5: Repository (Infrastructure Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#krok-6-dto-application-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Krok 6: DTO (Application Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Response
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-2-zatwierdzanie-ogoszenia" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑ Przyk≈Çad 2: Zatwierdzanie Og≈Çoszenia
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîÑ Przyk≈Çad 2: Zatwierdzanie Og≈Çoszenia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-admin-zatwierdza-oczekujace-ogoszenie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: Admin zatwierdza oczekujƒÖce og≈Çoszenie
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-entity-business-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain Entity (Business Logic!)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-3-rejestracja-uzytkownika" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîê Przyk≈Çad 3: Rejestracja U≈ºytkownika
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîê Przyk≈Çad 3: Rejestracja U≈ºytkownika">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-object-z-walidacja" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Object z WalidacjƒÖ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-4-integracja-z-external-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìù Przyk≈Çad 4: Integracja z External API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìù Przyk≈Çad 4: Integracja z External API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenariusz-cli-command-pobiera-sowo-dnia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenariusz: CLI Command pobiera s≈Çowo dnia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-command-presentation-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Command (Presentation Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        External Service
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#przykad-5-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ°Ô∏è Przyk≈Çad 5: Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ°Ô∏è Przyk≈Çad 5: Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hierarchia-wyjatkow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hierarchia WyjƒÖtk√≥w
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-comprehensive-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller - Comprehensive Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagram-flow-kompletny-scenariusz" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Diagram Flow - Kompletny Scenariusz
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#szybka-referencja-patternow" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Szybka Referencja Pattern√≥w
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ Szybka Referencja Pattern√≥w">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tworzenie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tworzenie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zapisanie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zapisanie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pobranie-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pobranie Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformacja-do-dto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transformacja do DTO
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obsuga-bedow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Obs≈Çuga B≈Çƒôd√≥w
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="praktyczne-przykady-i-wzorce">Praktyczne Przyk≈Çady i Wzorce</h1>
<p>Rzeczywiste przyk≈Çady kodu pokazujƒÖce jak u≈ºywaƒá architekturƒô DDD w DoDomuDojadƒô.</p>
<h2 id="przykad-1-tworzenie-ogoszenia">üìù Przyk≈Çad 1: Tworzenie Og≈Çoszenia</h2>
<h3 id="scenariusz-nowy-admin-chce-stworzyc-ogoszenie">Scenariusz: Nowy admin chce stworzyƒá og≈Çoszenie</h3>
<div class="highlight"><pre><span></span><code>HTTP POST /api/announcements
{
  &quot;title&quot;: &quot;Nowe godziny otwarcia&quot;,
  &quot;text&quot;: &quot;Od poniedzia≈Çku bƒôdziemy otwarci od 8:00 do 18:00&quot;,
  &quot;valid_until&quot;: &quot;2026-02-01T23:59:59Z&quot;
}
</code></pre></div>
<h3 id="krok-1-controller-presentation-layer">Krok 1: Controller (Presentation Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Http/Controller/AnnouncementController.php</span>
<span class="x">class AnnouncementController {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private Container $container,</span>
<span class="x">        private LoggerInterface $logger</span>
<span class="x">    ) {}</span>

<span class="x">    public function create(Request $request): Response {</span>
<span class="x">        try {</span>
<span class="x">            // Parse JSON body</span>
<span class="x">            $data = $request-&gt;json();</span>

<span class="x">            // Create Request object</span>
<span class="x">            $createRequest = new CreateAnnouncementRequest(</span>
<span class="x">                title: $data[&#39;title&#39;] ?? &#39;&#39;,</span>
<span class="x">                text: $data[&#39;text&#39;] ?? &#39;&#39;,</span>
<span class="x">                validUntil: $data[&#39;valid_until&#39;] ?? &#39;&#39;,</span>
<span class="x">                userId: $request-&gt;userId() // from JWT token</span>
<span class="x">            );</span>

<span class="x">            // Validate request</span>
<span class="x">            $errors = $createRequest-&gt;validate();</span>
<span class="x">            if (!empty($errors)) {</span>
<span class="x">                return Response::unprocessableEntity([&#39;errors&#39; =&gt; $errors]);</span>
<span class="x">            }</span>

<span class="x">            // Get UseCase from DI Container</span>
<span class="x">            $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);</span>

<span class="x">            // Execute</span>
<span class="x">            $announcementDTO = $useCase-&gt;execute($createRequest);</span>

<span class="x">            return Response::created([</span>
<span class="x">                &#39;id&#39; =&gt; $announcementDTO-&gt;id,</span>
<span class="x">                &#39;title&#39; =&gt; $announcementDTO-&gt;title,</span>
<span class="x">                &#39;status&#39; =&gt; $announcementDTO-&gt;status,</span>
<span class="x">                &#39;created_at&#39; =&gt; $announcementDTO-&gt;createdAt</span>
<span class="x">            ]);</span>

<span class="x">        } catch (ValidationException $e) {</span>
<span class="x">            return Response::unprocessableEntity([&#39;errors&#39; =&gt; $e-&gt;getErrors()]);</span>
<span class="x">        } catch (AnnouncementException $e) {</span>
<span class="x">            return Response::badRequest([&#39;error&#39; =&gt; $e-&gt;getMessage()]);</span>
<span class="x">        } catch (Exception $e) {</span>
<span class="x">            $this-&gt;logger-&gt;error(&quot;Failed to create announcement&quot;, [&#39;error&#39; =&gt; $e]);</span>
<span class="x">            return Response::internalServerError();</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="krok-2-use-case-application-layer">Krok 2: Use Case (Application Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Application/UseCase/Announcement/CreateAnnouncementUseCase.php</span>
<span class="x">class CreateAnnouncementUseCase {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private AnnouncementRepository $announcementRepository,</span>
<span class="x">        private LoggerInterface $logger</span>
<span class="x">    ) {}</span>

<span class="x">    public function execute(CreateAnnouncementRequest $request): AnnouncementDTO {</span>
<span class="x">        // Step 1: Validate request</span>
<span class="x">        $errors = $request-&gt;validate();</span>
<span class="x">        if (!empty($errors)) {</span>
<span class="x">            throw new ValidationException($errors);</span>
<span class="x">        }</span>

<span class="x">        // Step 2: Create Domain Entity using factory</span>
<span class="x">        $announcement = AnnouncementFactory::createFromRequest(</span>
<span class="x">            $request,</span>
<span class="x">            userId: $request-&gt;userId</span>
<span class="x">        );</span>

<span class="x">        // Step 3: Save to repository</span>
<span class="x">        $this-&gt;announcementRepository-&gt;save($announcement);</span>

<span class="x">        // Step 4: Log</span>
<span class="x">        $this-&gt;logger-&gt;info(&quot;Announcement created&quot;, [</span>
<span class="x">            &#39;id&#39; =&gt; $announcement-&gt;id,</span>
<span class="x">            &#39;title&#39; =&gt; $announcement-&gt;title,</span>
<span class="x">            &#39;userId&#39; =&gt; $request-&gt;userId</span>
<span class="x">        ]);</span>

<span class="x">        // Step 5: Transform to DTO</span>
<span class="x">        return AnnouncementDTO::fromEntity($announcement);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="krok-3-factory-infrastructure-layer">Krok 3: Factory (Infrastructure Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Infrastructure/Factory/AnnouncementFactory.php</span>
<span class="x">class AnnouncementFactory {</span>
<span class="x">    public static function createFromRequest(</span>
<span class="x">        CreateAnnouncementRequest $request,</span>
<span class="x">        int $userId = null</span>
<span class="x">    ): Announcement {</span>
<span class="x">        return Announcement::createNew(</span>
<span class="x">            title: $request-&gt;title,</span>
<span class="x">            text: $request-&gt;text,</span>
<span class="x">            validUntil: new DateTimeImmutable($request-&gt;validUntil),</span>
<span class="x">            userId: $userId ?? $request-&gt;userId,</span>
<span class="x">        );</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="krok-4-domain-entity-domain-layer">Krok 4: Domain Entity (Domain Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Domain/Entity/Announcement.php</span>
<span class="x">final class Announcement {</span>
<span class="x">    public function __construct(</span>
<span class="x">        public ?int               $id,</span>
<span class="x">        public string             $title,</span>
<span class="x">        public string             $text,</span>
<span class="x">        public DateTimeImmutable  $createdAt,</span>
<span class="x">        public DateTimeImmutable  $validUntil,</span>
<span class="x">        public ?int               $userId,</span>
<span class="x">        public AnnouncementStatus $status = AnnouncementStatus::PENDING,</span>
<span class="x">        public ?DateTimeImmutable $decidedAt = null,</span>
<span class="x">        public ?int               $decidedBy = null,</span>
<span class="x">    ){}</span>

<span class="x">    // Factory method - tworzy ju≈º zatwierdzone og≈Çoszenie</span>
<span class="x">    public static function createNew(</span>
<span class="x">        string            $title,</span>
<span class="x">        string            $text,</span>
<span class="x">        DateTimeImmutable $validUntil,</span>
<span class="x">        int               $userId,</span>
<span class="x">    ): self {</span>
<span class="x">        return new self(</span>
<span class="x">            id: null, // Still null, will be set by DB</span>
<span class="x">            title: $title,</span>
<span class="x">            text: $text,</span>
<span class="x">            createdAt: new DateTimeImmutable(),</span>
<span class="x">            validUntil: $validUntil,</span>
<span class="x">            userId: $userId,</span>
<span class="x">            status: AnnouncementStatus::APPROVED,</span>
<span class="x">            decidedAt: new DateTimeImmutable(),</span>
<span class="x">            decidedBy: $userId // Admin who created it</span>
<span class="x">        );</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="krok-5-repository-infrastructure-layer">Krok 5: Repository (Infrastructure Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Infrastructure/Repository/DatabaseAnnouncementRepository.php</span>
<span class="x">class DatabaseAnnouncementRepository {</span>
<span class="x">    public function __construct(private PDO $pdo) {}</span>

<span class="x">    public function save(Announcement $announcement): void {</span>
<span class="x">        if ($announcement-&gt;id === null) {</span>
<span class="x">            // INSERT</span>
<span class="x">            $stmt = $this-&gt;pdo-&gt;prepare(</span>
<span class="x">                &#39;INSERT INTO announcements (</span>
<span class="x">                    title, text, created_at, valid_until, user_id, status, decided_at, decided_by</span>
<span class="x">                ) VALUES (</span>
<span class="x">                    :title, :text, :created_at, :valid_until, :user_id, :status, :decided_at, :decided_by</span>
<span class="x">                )&#39;</span>
<span class="x">            );</span>

<span class="x">            $stmt-&gt;execute([</span>
<span class="x">                &#39;:title&#39; =&gt; $announcement-&gt;title,</span>
<span class="x">                &#39;:text&#39; =&gt; $announcement-&gt;text,</span>
<span class="x">                &#39;:created_at&#39; =&gt; $announcement-&gt;createdAt-&gt;format(&#39;c&#39;),</span>
<span class="x">                &#39;:valid_until&#39; =&gt; $announcement-&gt;validUntil-&gt;format(&#39;c&#39;),</span>
<span class="x">                &#39;:user_id&#39; =&gt; $announcement-&gt;userId,</span>
<span class="x">                &#39;:status&#39; =&gt; $announcement-&gt;status-&gt;name,</span>
<span class="x">                &#39;:decided_at&#39; =&gt; $announcement-&gt;decidedAt?-&gt;format(&#39;c&#39;),</span>
<span class="x">                &#39;:decided_by&#39; =&gt; $announcement-&gt;decidedBy,</span>
<span class="x">            ]);</span>

<span class="x">            // Get inserted ID and update entity</span>
<span class="x">            $announcement-&gt;id = (int) $this-&gt;pdo-&gt;lastInsertId();</span>
<span class="x">        } else {</span>
<span class="x">            // UPDATE</span>
<span class="x">            $stmt = $this-&gt;pdo-&gt;prepare(</span>
<span class="x">                &#39;UPDATE announcements SET </span>
<span class="x">                    title = :title, </span>
<span class="x">                    text = :text, </span>
<span class="x">                    status = :status, </span>
<span class="x">                    decided_at = :decided_at, </span>
<span class="x">                    decided_by = :decided_by </span>
<span class="x">                WHERE id = :id&#39;</span>
<span class="x">            );</span>

<span class="x">            $stmt-&gt;execute([</span>
<span class="x">                &#39;:id&#39; =&gt; $announcement-&gt;id,</span>
<span class="x">                &#39;:title&#39; =&gt; $announcement-&gt;title,</span>
<span class="x">                &#39;:text&#39; =&gt; $announcement-&gt;text,</span>
<span class="x">                &#39;:status&#39; =&gt; $announcement-&gt;status-&gt;name,</span>
<span class="x">                &#39;:decided_at&#39; =&gt; $announcement-&gt;decidedAt?-&gt;format(&#39;c&#39;),</span>
<span class="x">                &#39;:decided_by&#39; =&gt; $announcement-&gt;decidedBy,</span>
<span class="x">            ]);</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="krok-6-dto-application-layer">Krok 6: DTO (Application Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Application/DataTransferObject/AnnouncementDTO.php</span>
<span class="x">final class AnnouncementDTO {</span>
<span class="x">    public function __construct(</span>
<span class="x">        public int     $id,</span>
<span class="x">        public string  $title,</span>
<span class="x">        public string  $text,</span>
<span class="x">        public string  $createdAt,</span>
<span class="x">        public string  $validUntil,</span>
<span class="x">        public ?int    $userId,</span>
<span class="x">        public string  $status,</span>
<span class="x">        public ?string $decidedAt,</span>
<span class="x">        public ?int    $decidedBy,</span>
<span class="x">    ) {}</span>

<span class="x">    public static function fromEntity(Announcement $entity): self {</span>
<span class="x">        return new self(</span>
<span class="x">            id: $entity-&gt;id,</span>
<span class="x">            title: $entity-&gt;title,</span>
<span class="x">            text: $entity-&gt;text,</span>
<span class="x">            createdAt: $entity-&gt;createdAt-&gt;format(&#39;c&#39;),</span>
<span class="x">            validUntil: $entity-&gt;validUntil-&gt;format(&#39;c&#39;),</span>
<span class="x">            userId: $entity-&gt;userId,</span>
<span class="x">            status: $entity-&gt;status-&gt;name,</span>
<span class="x">            decidedAt: $entity-&gt;decidedAt?-&gt;format(&#39;c&#39;),</span>
<span class="x">            decidedBy: $entity-&gt;decidedBy,</span>
<span class="x">        );</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="http-response">HTTP Response</h3>
<div class="highlight"><pre><span></span><code><span class="err">HTTP</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class="err">Crea</span><span class="kc">te</span><span class="err">d</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nowe godziny otwarcia&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;approved&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2026-01-02T10:42:00Z&quot;</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="przykad-2-zatwierdzanie-ogoszenia">üîÑ Przyk≈Çad 2: Zatwierdzanie Og≈Çoszenia</h2>
<h3 id="scenariusz-admin-zatwierdza-oczekujace-ogoszenie">Scenariusz: Admin zatwierdza oczekujƒÖce og≈Çoszenie</h3>
<div class="highlight"><pre><span></span><code>HTTP POST /api/announcements/{id}/approve
</code></pre></div>
<h3 id="controller">Controller</h3>
<div class="highlight"><pre><span></span><code><span class="x">public function approve(Request $request, int $id): Response {</span>
<span class="x">    try {</span>
<span class="x">        $useCase = $this-&gt;container-&gt;get(ApproveAnnouncementUseCase::class);</span>
<span class="x">        $announcementDTO = $useCase-&gt;execute(</span>
<span class="x">            announcementId: $id,</span>
<span class="x">            adminId: $request-&gt;userId()</span>
<span class="x">        );</span>

<span class="x">        return Response::ok([</span>
<span class="x">            &#39;message&#39; =&gt; &#39;Announcement approved&#39;,</span>
<span class="x">            &#39;announcement&#39; =&gt; $announcementDTO</span>
<span class="x">        ]);</span>
<span class="x">    } catch (AnnouncementNotFoundException $e) {</span>
<span class="x">        return Response::notFound([&#39;error&#39; =&gt; &#39;Announcement not found&#39;]);</span>
<span class="x">    } catch (AnnouncementException $e) {</span>
<span class="x">        return Response::badRequest([&#39;error&#39; =&gt; $e-&gt;getMessage()]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="use-case">Use Case</h3>
<div class="highlight"><pre><span></span><code><span class="x">class ApproveAnnouncementUseCase {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private AnnouncementRepository $repository</span>
<span class="x">    ) {}</span>

<span class="x">    public function execute(int $announcementId, int $adminId): AnnouncementDTO {</span>
<span class="x">        // Pobierz z bazy</span>
<span class="x">        $announcement = $this-&gt;repository-&gt;findById($announcementId);</span>

<span class="x">        if (!$announcement) {</span>
<span class="x">            throw new AnnouncementNotFoundException();</span>
<span class="x">        }</span>

<span class="x">        if ($announcement-&gt;status !== AnnouncementStatus::PENDING) {</span>
<span class="x">            throw new AnnouncementException(</span>
<span class="x">                &quot;Cannot approve announcement that is not pending&quot;</span>
<span class="x">            );</span>
<span class="x">        }</span>

<span class="x">        // Aplikuj regu≈Çy biznesowe (logika w Domain!)</span>
<span class="x">        $announcement-&gt;approve($adminId);</span>

<span class="x">        // Zapisz</span>
<span class="x">        $this-&gt;repository-&gt;save($announcement);</span>

<span class="x">        // Zwr√≥ƒá DTO</span>
<span class="x">        return AnnouncementDTO::fromEntity($announcement);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="domain-entity-business-logic">Domain Entity (Business Logic!)</h3>
<div class="highlight"><pre><span></span><code><span class="x">public function approve(int $decidedBy): void {</span>
<span class="x">    // Business rule: Only PENDING can be approved</span>
<span class="x">    // (implicit invariant, enforced by UseCase)</span>

<span class="x">    $this-&gt;status = AnnouncementStatus::APPROVED;</span>
<span class="x">    $this-&gt;decidedAt = new DateTimeImmutable();</span>
<span class="x">    $this-&gt;decidedBy = $decidedBy;</span>
<span class="x">}</span>
</code></pre></div>
<hr />
<h2 id="przykad-3-rejestracja-uzytkownika">üîê Przyk≈Çad 3: Rejestracja U≈ºytkownika</h2>
<h3 id="controller_1">Controller</h3>
<div class="highlight"><pre><span></span><code><span class="x">public function register(Request $request): Response {</span>
<span class="x">    try {</span>
<span class="x">        $registerRequest = new RegisterUserRequest(</span>
<span class="x">            email: $request-&gt;input(&#39;email&#39;),</span>
<span class="x">            password: $request-&gt;input(&#39;password&#39;),</span>
<span class="x">            name: $request-&gt;input(&#39;name&#39;),</span>
<span class="x">            phoneNumber: $request-&gt;input(&#39;phone_number&#39;)</span>
<span class="x">        );</span>

<span class="x">        $useCase = $this-&gt;container-&gt;get(RegisterUserUseCase::class);</span>
<span class="x">        $userDTO = $useCase-&gt;execute($registerRequest);</span>

<span class="x">        return Response::created([&#39;user&#39; =&gt; $userDTO]);</span>

<span class="x">    } catch (ValidationException $e) {</span>
<span class="x">        return Response::unprocessableEntity([&#39;errors&#39; =&gt; $e-&gt;getErrors()]);</span>
<span class="x">    } catch (UserException $e) {</span>
<span class="x">        return Response::badRequest([&#39;error&#39; =&gt; $e-&gt;getMessage()]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="use-case_1">Use Case</h3>
<div class="highlight"><pre><span></span><code><span class="x">class RegisterUserUseCase {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private UserRepository $userRepository,</span>
<span class="x">        private PasswordHasher $passwordHasher</span>
<span class="x">    ) {}</span>

<span class="x">    public function execute(RegisterUserRequest $request): UserDTO {</span>
<span class="x">        // Waliduj</span>
<span class="x">        $errors = $request-&gt;validate();</span>
<span class="x">        if (!empty($errors)) {</span>
<span class="x">            throw new ValidationException($errors);</span>
<span class="x">        }</span>

<span class="x">        // Sprawd≈∫ czy email ju≈º istnieje</span>
<span class="x">        if ($this-&gt;userRepository-&gt;existsByEmail($request-&gt;email)) {</span>
<span class="x">            throw new UserException(&quot;Email already registered&quot;);</span>
<span class="x">        }</span>

<span class="x">        // Zahaszuj has≈Ço (Infrastructure concern)</span>
<span class="x">        $passwordHash = $this-&gt;passwordHasher-&gt;hash($request-&gt;password);</span>

<span class="x">        // Stw√≥rz Entity</span>
<span class="x">        $user = new User(</span>
<span class="x">            id: null,</span>
<span class="x">            email: $request-&gt;email,</span>
<span class="x">            passwordHash: $passwordHash,</span>
<span class="x">            name: $request-&gt;name,</span>
<span class="x">            phoneNumber: $request-&gt;phoneNumber,</span>
<span class="x">            role: &#39;user&#39; // Default role</span>
<span class="x">        );</span>

<span class="x">        // Zapisz</span>
<span class="x">        $this-&gt;userRepository-&gt;save($user);</span>

<span class="x">        // Zwr√≥ƒá DTO (bez has≈Ça!)</span>
<span class="x">        return UserDTO::fromEntity($user);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="request-object-z-walidacja">Request Object z WalidacjƒÖ</h3>
<div class="highlight"><pre><span></span><code><span class="x">class RegisterUserRequest {</span>
<span class="x">    public function __construct(</span>
<span class="x">        public string  $email,</span>
<span class="x">        public string  $password,</span>
<span class="x">        public string  $name,</span>
<span class="x">        public ?string $phoneNumber = null</span>
<span class="x">    ) {}</span>

<span class="x">    public function validate(): array {</span>
<span class="x">        $errors = [];</span>

<span class="x">        if (empty($this-&gt;email) || !filter_var($this-&gt;email, FILTER_VALIDATE_EMAIL)) {</span>
<span class="x">            $errors[&#39;email&#39;] = &#39;Valid email is required&#39;;</span>
<span class="x">        }</span>

<span class="x">        if (strlen($this-&gt;password) &lt; 8) {</span>
<span class="x">            $errors[&#39;password&#39;] = &#39;Password must be at least 8 characters&#39;;</span>
<span class="x">        }</span>

<span class="x">        if (empty($this-&gt;name) || strlen($this-&gt;name) &lt; 2) {</span>
<span class="x">            $errors[&#39;name&#39;] = &#39;Name must be at least 2 characters&#39;;</span>
<span class="x">        }</span>

<span class="x">        if ($this-&gt;phoneNumber &amp;&amp; !preg_match(&#39;/^\d{9,}$/&#39;, $this-&gt;phoneNumber)) {</span>
<span class="x">            $errors[&#39;phone&#39;] = &#39;Invalid phone number format&#39;;</span>
<span class="x">        }</span>

<span class="x">        return $errors;</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<hr />
<h2 id="przykad-4-integracja-z-external-api">üìù Przyk≈Çad 4: Integracja z External API</h2>
<h3 id="scenariusz-cli-command-pobiera-sowo-dnia">Scenariusz: CLI Command pobiera s≈Çowo dnia</h3>
<h3 id="cli-command-presentation-layer">CLI Command (Presentation Layer)</h3>
<div class="highlight"><pre><span></span><code><span class="x">// src/Console/Command/FetchDailyWordCommand.php</span>
<span class="x">class FetchDailyWordCommand {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private Container $container,</span>
<span class="x">        private LoggerInterface $logger</span>
<span class="x">    ) {}</span>

<span class="x">    public function execute(): void {</span>
<span class="x">        try {</span>
<span class="x">            $useCase = $this-&gt;container-&gt;get(FetchAndSaveWordUseCase::class);</span>
<span class="x">            $wordDTO = $useCase-&gt;execute();</span>

<span class="x">            echo &quot;‚úì Word of the day saved: {$wordDTO-&gt;word}\n&quot;;</span>
<span class="x">            $this-&gt;logger-&gt;info(&quot;Daily word fetched&quot;, [&#39;word&#39; =&gt; $wordDTO-&gt;word]);</span>

<span class="x">        } catch (ExternalServiceException $e) {</span>
<span class="x">            echo &quot;‚úó Failed to fetch word: {$e-&gt;getMessage()}\n&quot;;</span>
<span class="x">            $this-&gt;logger-&gt;error(&quot;Failed to fetch daily word&quot;, [&#39;error&#39; =&gt; $e]);</span>
<span class="x">            exit(1);</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="use-case_2">Use Case</h3>
<div class="highlight"><pre><span></span><code><span class="x">class FetchAndSaveWordUseCase {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private ExternalWordApiService $wordService,</span>
<span class="x">        private WordRepository $wordRepository</span>
<span class="x">    ) {}</span>

<span class="x">    public function execute(): WordDTO {</span>
<span class="x">        // Get from external API (Infrastructure)</span>
<span class="x">        $word = $this-&gt;wordService-&gt;fetchDailyWord();</span>

<span class="x">        // Save to DB (Infrastructure)</span>
<span class="x">        $this-&gt;wordRepository-&gt;save($word);</span>

<span class="x">        // Return DTO</span>
<span class="x">        return WordDTO::fromEntity($word);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="external-service">External Service</h3>
<div class="highlight"><pre><span></span><code><span class="x">class ExternalWordApiService {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private HttpClient $client,</span>
<span class="x">        private string $apiKey</span>
<span class="x">    ) {}</span>

<span class="x">    public function fetchDailyWord(): Word {</span>
<span class="x">        try {</span>
<span class="x">            // HTTP Call</span>
<span class="x">            $response = $this-&gt;client-&gt;get(</span>
<span class="x">                &#39;https://api.wordapi.com/daily&#39;,</span>
<span class="x">                [&#39;Authorization&#39; =&gt; &quot;Bearer {$this-&gt;apiKey}&quot;]</span>
<span class="x">            );</span>

<span class="x">            if ($response-&gt;status() !== 200) {</span>
<span class="x">                throw new ExternalServiceException(</span>
<span class="x">                    &quot;API returned status {$response-&gt;status()}&quot;</span>
<span class="x">                );</span>
<span class="x">            }</span>

<span class="x">            $data = json_decode($response-&gt;body(), assoc: true);</span>

<span class="x">            // Validate response structure</span>
<span class="x">            if (!isset($data[&#39;word&#39;]) || !isset($data[&#39;definition&#39;])) {</span>
<span class="x">                throw new InvalidResponseException(&quot;Missing required fields&quot;);</span>
<span class="x">            }</span>

<span class="x">            // Transform to Domain Entity</span>
<span class="x">            return new Word(</span>
<span class="x">                id: null,</span>
<span class="x">                word: $data[&#39;word&#39;],</span>
<span class="x">                definition: $data[&#39;definition&#39;],</span>
<span class="x">                example: $data[&#39;example&#39;] ?? &#39;&#39;,</span>
<span class="x">                language: $data[&#39;language&#39;] ?? &#39;en&#39;</span>
<span class="x">            );</span>

<span class="x">        } catch (HttpException $e) {</span>
<span class="x">            throw new ExternalServiceException(&quot;Failed to fetch word&quot;, cause: $e);</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<hr />
<h2 id="przykad-5-error-handling">üõ°Ô∏è Przyk≈Çad 5: Error Handling</h2>
<h3 id="hierarchia-wyjatkow">Hierarchia WyjƒÖtk√≥w</h3>
<div class="highlight"><pre><span></span><code><span class="x">// Domain Layer</span>
<span class="x">namespace App\Domain\Exception;</span>

<span class="x">abstract class DomainException extends Exception {}</span>
<span class="x">class AnnouncementException extends DomainException {}</span>
<span class="x">class UserException extends DomainException {}</span>

<span class="x">// Application Layer</span>
<span class="x">namespace App\Application\Exception;</span>

<span class="x">class ValidationException extends Exception {</span>
<span class="x">    public function __construct(</span>
<span class="x">        private array $errors</span>
<span class="x">    ) {}</span>

<span class="x">    public function getErrors(): array {</span>
<span class="x">        return $this-&gt;errors;</span>
<span class="x">    }</span>
<span class="x">}</span>

<span class="x">// Infrastructure Layer</span>
<span class="x">namespace App\Infrastructure\Exception;</span>

<span class="x">class DatabaseException extends Exception {}</span>
<span class="x">class ExternalServiceException extends Exception {}</span>
</code></pre></div>
<h3 id="controller-comprehensive-error-handling">Controller - Comprehensive Error Handling</h3>
<div class="highlight"><pre><span></span><code><span class="x">public function create(Request $request): Response {</span>
<span class="x">    try {</span>
<span class="x">        // Happy path</span>
<span class="x">        $request = new CreateAnnouncementRequest(...);</span>
<span class="x">        $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);</span>
<span class="x">        $dto = $useCase-&gt;execute($request);</span>

<span class="x">        return Response::created([&#39;data&#39; =&gt; $dto]);</span>

<span class="x">    } catch (ValidationException $e) {</span>
<span class="x">        // Client error - bad input</span>
<span class="x">        return Response::unprocessableEntity([</span>
<span class="x">            &#39;error&#39; =&gt; &#39;Validation failed&#39;,</span>
<span class="x">            &#39;errors&#39; =&gt; $e-&gt;getErrors()</span>
<span class="x">        ]);</span>

<span class="x">    } catch (AnnouncementException | UserException $e) {</span>
<span class="x">        // Business logic error</span>
<span class="x">        return Response::badRequest([</span>
<span class="x">            &#39;error&#39; =&gt; $e-&gt;getMessage()</span>
<span class="x">        ]);</span>

<span class="x">    } catch (DatabaseException $e) {</span>
<span class="x">        // Infrastructure error</span>
<span class="x">        $this-&gt;logger-&gt;error(&quot;Database error&quot;, [&#39;error&#39; =&gt; $e]);</span>
<span class="x">        return Response::internalServerError([</span>
<span class="x">            &#39;error&#39; =&gt; &#39;Failed to save announcement&#39;</span>
<span class="x">        ]);</span>

<span class="x">    } catch (Exception $e) {</span>
<span class="x">        // Unexpected error</span>
<span class="x">        $this-&gt;logger-&gt;critical(&quot;Unexpected error&quot;, [&#39;error&#39; =&gt; $e]);</span>
<span class="x">        return Response::internalServerError([</span>
<span class="x">            &#39;error&#39; =&gt; &#39;Internal server error&#39;</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<hr />
<h2 id="diagram-flow-kompletny-scenariusz">üìä Diagram Flow - Kompletny Scenariusz</h2>
<div class="highlight"><pre><span></span><code>USER
  ‚Üì
HTTP POST /api/announcements
  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PRESENTATION LAYER         ‚îÇ
‚îÇ  (AnnouncementController)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. Parse JSON                ‚îÇ
‚îÇ 2. Create Request object     ‚îÇ
‚îÇ 3. Validate request          ‚îÇ
‚îÇ 4. Get UseCase from DI       ‚îÇ
‚îÇ 5. Execute UseCase           ‚îÇ
‚îÇ 6. Format Response           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   APPLICATION LAYER          ‚îÇ
‚îÇ (CreateAnnouncementUseCase)  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. Validate request          ‚îÇ
‚îÇ 2. Call factory to create    ‚îÇ
‚îÇ    domain entity             ‚îÇ
‚îÇ 3. Call repository.save()    ‚îÇ
‚îÇ 4. Call DTO.fromEntity()     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   DOMAIN LAYER               ‚îÇ
‚îÇ   (Announcement Entity)       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - Apply business rules       ‚îÇ
‚îÇ - Ensure invariants          ‚îÇ
‚îÇ - Return to UseCase          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ INFRASTRUCTURE LAYER         ‚îÇ
‚îÇ (DatabaseAnnouncementRepository)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. SQL INSERT                ‚îÇ
‚îÇ 2. Update ID                 ‚îÇ
‚îÇ 3. Return to UseCase         ‚îÇ
‚îÇ                              ‚îÇ
‚îÇ (Database)                   ‚îÇ
‚îÇ announcements table          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
           HTTP 201
         (JSON DTO)
             ‚Üì
           USER
</code></pre></div>
<hr />
<h2 id="szybka-referencja-patternow">üéØ Szybka Referencja Pattern√≥w</h2>
<h3 id="tworzenie-entity">Tworzenie Entity</h3>
<div class="highlight"><pre><span></span><code><span class="x">// Factory method w Entity</span>
<span class="x">$entity = Announcement::createNew(...);</span>

<span class="x">// Lub Factory pattern</span>
<span class="x">$entity = AnnouncementFactory::createFromRequest($request);</span>
</code></pre></div>
<h3 id="zapisanie-entity">Zapisanie Entity</h3>
<div class="highlight"><pre><span></span><code><span class="x">$repository-&gt;save($entity); // INSERT lub UPDATE</span>
</code></pre></div>
<h3 id="pobranie-entity">Pobranie Entity</h3>
<div class="highlight"><pre><span></span><code><span class="x">$entity = $repository-&gt;findById($id);     // Jedno</span>
<span class="x">$entities = $repository-&gt;findAll();       // Wiele</span>
<span class="x">$entities = $repository-&gt;findByStatus(); // Filtr</span>
</code></pre></div>
<h3 id="transformacja-do-dto">Transformacja do DTO</h3>
<div class="highlight"><pre><span></span><code><span class="x">$dto = AnnouncementDTO::fromEntity($entity);</span>
</code></pre></div>
<h3 id="obsuga-bedow">Obs≈Çuga B≈Çƒôd√≥w</h3>
<div class="highlight"><pre><span></span><code><span class="x">if ($errors = $request-&gt;validate()) {</span>
<span class="x">    throw new ValidationException($errors);</span>
<span class="x">}</span>

<span class="x">if (!$entity) {</span>
<span class="x">    throw new EntityNotFoundException();</span>
<span class="x">}</span>

<span class="x">$entity-&gt;businessMethod(); // Rzuca DomainException je≈õli invariant naruszony</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "navigation.top"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>