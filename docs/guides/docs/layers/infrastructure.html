<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>DoDomuDojade Documentation</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">DoDomuDojade Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category -namespaces">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/app.html" class="">App</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/app-application.html" class="">Application</a>
                
            </li>
                    <li>
                <a href="namespaces/app-config.html" class="">config</a>
                
            </li>
                    <li>
                <a href="namespaces/app-console.html" class="">Console</a>
                
            </li>
                    <li>
                <a href="namespaces/app-domain.html" class="">Domain</a>
                
            </li>
                    <li>
                <a href="namespaces/app-http.html" class="">Http</a>
                
            </li>
                    <li>
                <a href="namespaces/app-infrastructure.html" class="">Infrastructure</a>
                
            </li>
            </ul>

                        </section>
                <section class="phpdocumentor-sidebar__category -packages">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Application.html" class="">Application</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category -reports">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category -indices">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        
<section class="section " id="infrastructure-layer-api-reference">
            <h1>Infrastructure Layer - API Reference</h1>

            
    <p>Warstwa Infrastructure zawiera implementacjƒô technicznych szczeg√≥≈Ç√≥w, integracje z zewnƒôtrznymi serwisami i zarzƒÖdzaniem danymi.</p>

            <section class="section " id="struktura-infrastructure-layer">
            <h2>üìç Struktura Infrastructure Layer</h2>

            <pre><code class="language-">src/Infrastructure/
‚îú‚îÄ‚îÄ Container.php                # Dependency Injection Container
‚îú‚îÄ‚îÄ Repository/                  # Data Access Layer
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseAnnouncementRepository.php
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseUserRepository.php
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseWordRepository.php
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseQuoteRepository.php
‚îÇ   ‚îî‚îÄ‚îÄ DatabaseCountdownRepository.php
‚îú‚îÄ‚îÄ Service/                     # External Services
‚îÇ   ‚îú‚îÄ‚îÄ ExternalWordApiService.php
‚îÇ   ‚îú‚îÄ‚îÄ ExternalQuoteApiService.php
‚îÇ   ‚îú‚îÄ‚îÄ EmailService.php
‚îÇ   ‚îî‚îÄ‚îÄ LoggerService.php
‚îú‚îÄ‚îÄ Factory/                     # Object Creation
‚îÇ   ‚îú‚îÄ‚îÄ AnnouncementFactory.php
‚îÇ   ‚îú‚îÄ‚îÄ UserFactory.php
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Security/                    # Security &amp; Auth
‚îÇ   ‚îú‚îÄ‚îÄ PasswordHasher.php
‚îÇ   ‚îú‚îÄ‚îÄ TokenGenerator.php
‚îÇ   ‚îî‚îÄ‚îÄ AuthenticationService.php
‚îú‚îÄ‚îÄ Helper/                      # Utility Functions
‚îÇ   ‚îú‚îÄ‚îÄ DateHelper.php
‚îÇ   ‚îú‚îÄ‚îÄ StringHelper.php
‚îÇ   ‚îî‚îÄ‚îÄ ValidationHelper.php
‚îú‚îÄ‚îÄ Translation/                 # Internationalization
‚îÇ   ‚îî‚îÄ‚îÄ TranslationService.php
‚îú‚îÄ‚îÄ Trait/                       # Shared Traits
‚îÇ   ‚îî‚îÄ‚îÄ TimestampableTrait.php
‚îî‚îÄ‚îÄ View/                        # View Helpers
    ‚îî‚îÄ‚îÄ TemplateRenderer.php
</code></pre>

            
    <p><strong>Namespace</strong>
: <code>App\Infrastructure\</code>
</p>

            <hr />

    </section>

            <section class="section " id="repositories">
            <h2>üîå Repositories</h2>

            
    <p>Repositories implementujƒÖ abstrakcjƒô dostƒôpu do danych (patrz: Repository Pattern).</p>

            <section class="section " id="databaseannouncementrepository">
            <h3>DatabaseAnnouncementRepository</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Repository/DatabaseAnnouncementRepository.php</code>
</p>

            
    <p><strong>Odpowiedzialno≈õƒá</strong>
: Persystencja danych Announcement w bazie danych</p>

            
    <p><strong>Implementuje</strong>
: <code>AnnouncementRepositoryInterface</code>
 (Future)</p>

            
    <p><strong>Zale≈ºno≈õci</strong>
:</p>

            <pre><code class="language-">public function __construct(
    private PDO $pdo
)
</code></pre>

            <section class="section " id="save-announcement-announcement-void">
            <h4>save(Announcement $announcement): void</h4>

            
    <p>Zapisz (lub zaktualizuj) og≈Çoszenie w bazie.</p>

            
    <p><strong>Parametry</strong>
:</p>

            

<ul>
    <li class="dash"><code>Announcement $announcement</code>
 - Agregat do zapisania</li>

</ul>

            
    <p><strong>Efekty</strong>
:</p>

            

<ul>
    <li class="dash">INSERT je≈õli <code>$announcement-&gt;id === null</code>
</li>

    <li class="dash">UPDATE je≈õli <code>$announcement-&gt;id !== null</code>
</li>

</ul>

            
    <p><strong>SQL</strong>
:</p>

            <pre><code class="language-">-- INSERT
INSERT INTO announcements (
    title, text, created_at, valid_until, user_id, status, decided_at, decided_by
) VALUES (...)

-- UPDATE
UPDATE announcements SET 
    title = ?, text = ?, status = ?, decided_at = ?, decided_by = ?
WHERE id = ?
</code></pre>

            
    <p><strong>WyjƒÖtki</strong>
:</p>

            

<ul>
    <li class="dash"><code>DatabaseException</code>
 - B≈ÇƒÖd SQL</li>

    <li class="dash"><code>ConstraintViolationException</code>
 - Naruszenie constraint&#039;a</li>

</ul>

            
    <p><strong>U≈ºycie</strong>
:</p>

            <pre><code class="language-">$announcement = Announcement::createNew(...);
$repository-&gt;save($announcement);
</code></pre>

            <hr />

    </section>

            <section class="section " id="findbyid-int-id-announcement">
            <h4>findById(int $id): ?Announcement</h4>

            
    <p>Pobierz og≈Çoszenie po ID.</p>

            
    <p><strong>Parametry</strong>
:</p>

            

<ul>
    <li class="dash"><code>int $id</code>
 - ID og≈Çoszenia</li>

</ul>

            
    <p><strong>Zwraca</strong>
:</p>

            

<ul>
    <li class="dash"><code>Announcement</code>
 - Znalezione og≈Çoszenie</li>

    <li class="dash"><code>null</code>
 - Je≈õli nie znalezione</li>

</ul>

            
    <p><strong>SQL</strong>
:</p>

            <pre><code class="language-">SELECT * FROM announcements WHERE id = ? LIMIT 1
</code></pre>

            <hr />

    </section>

            <section class="section " id="findall-array">
            <h4>findAll(): array</h4>

            
    <p>Pobierz wszystkie og≈Çoszenia.</p>

            
    <p><strong>Zwraca</strong>
: <code>array&lt;Announcement&gt;</code>
</p>

            <hr />

    </section>

            <section class="section " id="findbystatus-string-status-array">
            <h4>findByStatus(string $status): array</h4>

            
    <p>Pobierz og≈Çoszenia o okre≈õlonym statusie.</p>

            
    <p><strong>Parametry</strong>
:</p>

            

<ul>
    <li class="dash"><code>string $status</code>
 - Status (pending/approved/rejected)</li>

</ul>

            
    <p><strong>Zwraca</strong>
: <code>array&lt;Announcement&gt;</code>
</p>

            <hr />

    </section>

            <section class="section " id="findvalid-array">
            <h4>findValid(): array</h4>

            
    <p>Pobierz tylko wa≈ºne og≈Çoszenia (approved i jeszcze nieugas≈Çe).</p>

            
    <p><strong>Zwraca</strong>
: <code>array&lt;Announcement&gt;</code>
 - Aktualnie widoczne</p>

            
    <p><strong>SQL</strong>
:</p>

            <pre><code class="language-">SELECT * FROM announcements 
WHERE status = &#039;approved&#039; 
AND valid_until &gt;= NOW()
ORDER BY created_at DESC
</code></pre>

            <hr />

    </section>

            <section class="section " id="delete-int-id-void">
            <h4>delete(int $id): void</h4>

            
    <p>Usu≈Ñ og≈Çoszenie.</p>

            
    <p><strong>Parametry</strong>
:</p>

            

<ul>
    <li class="dash"><code>int $id</code>
 - ID do usuniƒôcia</li>

</ul>

            <hr />

    </section>

    </section>

            <section class="section " id="databaseuserrepository">
            <h3>DatabaseUserRepository</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Repository/DatabaseUserRepository.php</code>
</p>

            
    <p>ZarzƒÖdza persystencjƒÖ u≈ºytkownik√≥w.</p>

            <section class="section " id="save-user-user-void">
            <h4>save(User $user): void</h4>

            
    <p>Zapisz u≈ºytkownika.</p>

    </section>

            <section class="section " id="findbyid-int-id-user">
            <h4>findById(int $id): ?User</h4>

            
    <p>Pobierz po ID.</p>

    </section>

            <section class="section " id="findbyemail-string-email-user">
            <h4>findByEmail(string $email): ?User</h4>

            
    <p>Pobierz po email.</p>

    </section>

            <section class="section " id="existsemail-string-email-bool">
            <h4>existsEmail(string $email): bool</h4>

            
    <p>Sprawd≈∫ czy email istnieje.</p>

            <hr />

    </section>

    </section>

            <section class="section " id="databasewordrepository">
            <h3>DatabaseWordRepository</h3>

            
    <p>ZarzƒÖdza s≈Çowami dnia.</p>

    </section>

            <section class="section " id="databasequoterepository">
            <h3>DatabaseQuoteRepository</h3>

            
    <p>ZarzƒÖdza cytatami.</p>

            <hr />

    </section>

    </section>

            <section class="section " id="external-services">
            <h2>üîó External Services</h2>

            
    <p>Serwisy integrujƒÖce siƒô z zewnƒôtrznymi API.</p>

            <section class="section " id="externalwordapiservice">
            <h3>ExternalWordApiService</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Service/ExternalWordApiService.php</code>
</p>

            
    <p><strong>Odpowiedzialno≈õƒá</strong>
: Pobieranie s≈Ç√≥w z zewnƒôtrznego API</p>

            
    <p><strong>Zale≈ºno≈õci</strong>
:</p>

            <pre><code class="language-">public function __construct(
    private HttpClient $httpClient,
    private ConfigService $config
)
</code></pre>

            <section class="section " id="fetchdailyword-word">
            <h4>fetchDailyWord(): Word</h4>

            
    <p>Pobierz s≈Çowo dnia z zewnƒôtrznego API.</p>

            
    <p><strong>Zwraca</strong>
: <code>Word</code>
 - Transformowane do Domain Entity</p>

            
    <p><strong>Flow</strong>
:</p>

            
    
<ol>
    <li>HTTP GET do external API</li>

    <li>Parse response</li>

    <li>Walidacja</li>

    <li>Transformacja do Word Entity</li>

    <li>Return</li>

</ol>

            
    <p><strong>WyjƒÖtki</strong>
:</p>

            

<ul>
    <li class="dash"><code>ExternalServiceException</code>
 - Problem z API</li>

    <li class="dash"><code>HttpException</code>
 - B≈ÇƒÖd HTTP</li>

    <li class="dash"><code>InvalidResponseException</code>
 - B≈Çƒôdna struktura danych</li>

</ul>

            
    <p><strong>HTTP</strong>
:</p>

            <pre><code class="language-">GET https://api.external.com/word/daily
Accept: application/json
Authorization: Bearer {token}
</code></pre>

            
    <p><strong>Response</strong>
:</p>

            <pre><code class="language-">{
  &quot;word&quot;: &quot;ephemeral&quot;,
  &quot;definition&quot;: &quot;Lasting for a very short time&quot;,
  &quot;example&quot;: &quot;The beauty of cherry blossoms is ephemeral&quot;,
  &quot;language&quot;: &quot;en&quot;
}
</code></pre>

            
    <p><strong>U≈ºycie</strong>
:</p>

            <pre><code class="language-">// W CLI Command lub UseCase
$word = $this-&gt;wordService-&gt;fetchDailyWord();
$this-&gt;wordRepository-&gt;save($word);
</code></pre>

            <hr />

    </section>

    </section>

            <section class="section " id="externalquoteapiservice">
            <h3>ExternalQuoteApiService</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Service/ExternalQuoteApiService.php</code>
</p>

            
    <p>Pobieranie cytat√≥w z zewnƒôtrznego API.</p>

            <section class="section " id="fetchdailyquote-quote">
            <h4>fetchDailyQuote(): Quote</h4>

            <hr />

    </section>

    </section>

            <section class="section " id="emailservice">
            <h3>EmailService</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Service/EmailService.php</code>
</p>

            
    <p><strong>Odpowiedzialno≈õƒá</strong>
: Wysy≈Çanie emaili</p>

            
    <p><strong>Zale≈ºno≈õci</strong>
:</p>

            <pre><code class="language-">public function __construct(
    private SmtpClient $smtpClient,
    private ConfigService $config
)
</code></pre>

            <section class="section " id="send-string-to-string-subject-string-body-void">
            <h4>send(string $to, string $subject, string $body): void</h4>

            
    <p>Wy≈õlij email.</p>

            
    <p><strong>Parametry</strong>
:</p>

            

<ul>
    <li class="dash"><code>string $to</code>
 - Adres email odbiorcy</li>

    <li class="dash"><code>string $subject</code>
 - Temat</li>

    <li class="dash"><code>string $body</code>
 - Tre≈õƒá (HTML/Plain)</li>

</ul>

            
    <p><strong>Efekty</strong>
: Email wys≈Çany via SMTP</p>

            
    <p><strong>WyjƒÖtki</strong>
:</p>

            

<ul>
    <li class="dash"><code>EmailException</code>
 - B≈ÇƒÖd wysy≈Çki</li>

</ul>

            <hr />

    </section>

    </section>

    </section>

            <section class="section " id="factories">
            <h2>üè≠ Factories</h2>

            
    <p>Fabryki tworzƒÖ kompleksowe obiekty z r√≥≈ºnych ≈∫r√≥de≈Ç.</p>

            <section class="section " id="announcementfactory">
            <h3>AnnouncementFactory</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Factory/AnnouncementFactory.php</code>
</p>

            <section class="section " id="createfromrequest-createannouncementrequest-request-announcement">
            <h4>createFromRequest(CreateAnnouncementRequest $request): Announcement</h4>

            
    <p>Utw√≥rz Announcement Entity z Request.</p>

            <pre><code class="language-">public static function createFromRequest(
    CreateAnnouncementRequest $request,
    ?int $userId = null
): Announcement {
    return Announcement::createNew(
        title: $request-&gt;title,
        text: $request-&gt;text,
        validUntil: new DateTimeImmutable($request-&gt;validUntil),
        userId: $userId ?? $request-&gt;userId,
    );
}
</code></pre>

    </section>

            <section class="section " id="createfromdatabaserow-array-row-announcement">
            <h4>createFromDatabaseRow(array $row): Announcement</h4>

            
    <p>Utw√≥rz Announcement Entity z rekordu bazy.</p>

            <pre><code class="language-">public static function createFromDatabaseRow(array $row): Announcement {
    return new Announcement(
        id: (int) $row[&#039;id&#039;],
        title: $row[&#039;title&#039;],
        text: $row[&#039;text&#039;],
        createdAt: new DateTimeImmutable($row[&#039;created_at&#039;]),
        validUntil: new DateTimeImmutable($row[&#039;valid_until&#039;]),
        userId: $row[&#039;user_id&#039;] ? (int) $row[&#039;user_id&#039;] : null,
        status: AnnouncementStatus::from($row[&#039;status&#039;]),
        decidedAt: $row[&#039;decided_at&#039;] ? new DateTimeImmutable($row[&#039;decided_at&#039;]) : null,
        decidedBy: $row[&#039;decided_by&#039;] ? (int) $row[&#039;decided_by&#039;] : null,
    );
}
</code></pre>

            <hr />

    </section>

    </section>

    </section>

            <section class="section " id="security-components">
            <h2>üîê Security Components</h2>

            
    <p>Komponenty bezpiecze≈Ñstwa i autentykacji.</p>

            <section class="section " id="passwordhasher">
            <h3>PasswordHasher</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Security/PasswordHasher.php</code>
</p>

            <section class="section " id="hash-string-password-string">
            <h4>hash(string $password): string</h4>

            
    <p>Zahaszuj has≈Ço.</p>

            <pre><code class="language-">public function hash(string $password): string {
    return password_hash($password, PASSWORD_BCRYPT, [
        &#039;cost&#039; =&gt; 12
    ]);
}
</code></pre>

    </section>

            <section class="section " id="verify-string-password-string-hash-bool">
            <h4>verify(string $password, string $hash): bool</h4>

            
    <p>Sprawd≈∫ has≈Ço.</p>

            <pre><code class="language-">public function verify(string $password, string $hash): bool {
    return password_verify($password, $hash);
}
</code></pre>

            <hr />

    </section>

    </section>

            <section class="section " id="tokengenerator">
            <h3>TokenGenerator</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Security/TokenGenerator.php</code>
</p>

            <section class="section " id="generatejwt-user-user-int-expiresin-3600-string">
            <h4>generateJWT(User $user, int $expiresIn = 3600): string</h4>

            
    <p>Wygeneruj JWT token dla u≈ºytkownika.</p>

            <pre><code class="language-">public function generateJWT(User $user, int $expiresIn = 3600): string {
    $payload = [
        &#039;user_id&#039; =&gt; $user-&gt;id,
        &#039;email&#039; =&gt; $user-&gt;email,
        &#039;role&#039; =&gt; $user-&gt;role,
        &#039;iat&#039; =&gt; time(),
        &#039;exp&#039; =&gt; time() + $expiresIn
    ];
    
    return JWT::encode($payload, $this-&gt;secret, &#039;HS256&#039;);
}
</code></pre>

    </section>

            <section class="section " id="generaterefreshtoken-user-user-string">
            <h4>generateRefreshToken(User $user): string</h4>

            
    <p>Wygeneruj refresh token.</p>

            <hr />

    </section>

    </section>

            <section class="section " id="authenticationservice">
            <h3>AuthenticationService</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Security/AuthenticationService.php</code>
</p>

            <section class="section " id="authenticate-string-email-string-password-user">
            <h4>authenticate(string $email, string $password): User</h4>

            
    <p>Uwierzytelnij u≈ºytkownika.</p>

            <pre><code class="language-">public function authenticate(string $email, string $password): User {
    $user = $this-&gt;userRepository-&gt;findByEmail($email);
    
    if (!$user || !$this-&gt;passwordHasher-&gt;verify($password, $user-&gt;passwordHash)) {
        throw new InvalidCredentialsException();
    }
    
    return $user;
}
</code></pre>

            <hr />

    </section>

    </section>

    </section>

            <section class="section " id="helpers">
            <h2>üõ†Ô∏è Helpers</h2>

            
    <p>Funkcje pomocnicze.</p>

            <section class="section " id="datehelper">
            <h3>DateHelper</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Helper/DateHelper.php</code>
</p>

            <pre><code class="language-">class DateHelper {
    public static function now(): DateTimeImmutable {
        return new DateTimeImmutable();
    }
    
    public static function tomorrow(): DateTimeImmutable {
        return self::now()-&gt;modify(&#039;+1 day&#039;);
    }
    
    public static function addDays(DateTimeImmutable $date, int $days): DateTimeImmutable {
        return $date-&gt;modify(&quot;+{$days} days&quot;);
    }
    
    public static function isExpired(DateTimeImmutable $date): bool {
        return $date &lt; self::now();
    }
}
</code></pre>

    </section>

            <section class="section " id="stringhelper">
            <h3>StringHelper</h3>

            <pre><code class="language-">class StringHelper {
    public static function slugify(string $text): string {
        return strtolower(preg_replace(&#039;/[^a-z0-9]+/&#039;, &#039;-&#039;, trim($text)));
    }
    
    public static function truncate(string $text, int $length = 100): string {
        if (strlen($text) &lt;= $length) return $text;
        return substr($text, 0, $length) . &#039;...&#039;;
    }
}
</code></pre>

    </section>

            <section class="section " id="validationhelper">
            <h3>ValidationHelper</h3>

            <pre><code class="language-">class ValidationHelper {
    public static function isValidEmail(string $email): bool {
        return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;
    }
    
    public static function isValidUrl(string $url): bool {
        return filter_var($url, FILTER_VALIDATE_URL) !== false;
    }
}
</code></pre>

            <hr />

    </section>

    </section>

            <section class="section " id="translation-service">
            <h2>üåê Translation Service</h2>

            
    <p>Obs≈Çuga wielojƒôzyczno≈õci.</p>

            <section class="section " id="translationservice">
            <h3>TranslationService</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Translation/TranslationService.php</code>
</p>

            <pre><code class="language-">public function translate(string $key, string $locale = &#039;pl&#039;): string {
    $messages = $this-&gt;loadMessages($locale);
    return $messages[$key] ?? $key;
}

public function t(string $key, array $params = [], string $locale = &#039;pl&#039;): string {
    $message = $this-&gt;translate($key, $locale);
    foreach ($params as $key =&gt; $value) {
        $message = str_replace(&quot;:$key&quot;, $value, $message);
    }
    return $message;
}
</code></pre>

            
    <p><strong>U≈ºycie</strong>
:</p>

            <pre><code class="language-">$this-&gt;translator-&gt;t(&#039;announcement.created&#039;, [&#039;title&#039; =&gt; $announcement-&gt;title]);
// &quot;Og≈Çoszenie &#039;Nowa promocja&#039; zosta≈Ço utworzone&quot;
</code></pre>

            <hr />

    </section>

    </section>

            <section class="section " id="dependency-injection-container">
            <h2>üöö Dependency Injection Container</h2>

            <section class="section " id="container-php">
            <h3>Container.php</h3>

            
    <p><strong>Lokalizacja</strong>
: <code>src/Infrastructure/Container.php</code>
</p>

            
    <p>ZarzƒÖdzanie zale≈ºno≈õciami i lifecycle&#039;em obiekt√≥w.</p>

            <pre><code class="language-">class Container {
    private array $services = [];
    private array $singletons = [];
    
    public function register(string $id, mixed $definition): void {
        $this-&gt;services[$id] = $definition;
    }
    
    public function singleton(string $id, callable $definition): void {
        $this-&gt;singletons[$id] = $definition;
    }
    
    public function get(string $id): mixed {
        if (isset($this-&gt;singletons[$id])) {
            // Zwr√≥ƒá ten sam instancjƒô
            return $this-&gt;singletons[$id]($this);
        }
        
        if (isset($this-&gt;services[$id])) {
            return $this-&gt;services[$id]($this);
        }
        
        throw new ServiceNotFoundException($id);
    }
}
</code></pre>

            <section class="section " id="rejestracja-serwisow">
            <h4>Rejestracja Serwis√≥w</h4>

            <pre><code class="language-">// src/bootstrap/services.php
$container-&gt;singleton(PDO::class, function(Container $c) {
    return new PDO(
        &#039;pgsql:host=localhost;dbname=dodomudojade&#039;,
        &#039;ddd&#039;,
        $_ENV[&#039;DB_PASSWORD&#039;]
    );
});

$container-&gt;singleton(AnnouncementRepository::class, function(Container $c) {
    return new DatabaseAnnouncementRepository($c-&gt;get(PDO::class));
});

$container-&gt;singleton(CreateAnnouncementUseCase::class, function(Container $c) {
    return new CreateAnnouncementUseCase(
        $c-&gt;get(AnnouncementRepository::class),
    );
});
</code></pre>

    </section>

            <section class="section " id="uzycie-w-controller">
            <h4>U≈ºycie w Controller</h4>

            <pre><code class="language-">class AnnouncementController {
    public function __construct(
        private Container $container
    ) {}
    
    public function create(Request $request): Response {
        $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);
        $dto = $useCase-&gt;execute($request);
        return Response::created($dto);
    }
}
</code></pre>

            <hr />

    </section>

    </section>

    </section>

            <section class="section " id="architektura-warstwowa">
            <h2>üìä Architektura Warstwowa</h2>

            <pre><code class="language-">Presentation (Http, Console)
        ‚Üì
    (uses)
        ‚Üì
Application (UseCase, DTO)
        ‚Üì
    (uses)
        ‚Üì
Domain (Entity, ValueObject, Enum)
   ‚Üë    ‚Üë
   |    |
(implements)
   |    |
Infrastructure (Repository, Service)
</code></pre>

            <hr />

    </section>

            <section class="section " id="best-practices">
            <h2>üéì Best Practices</h2>

            <section class="section " id="do">
            <h3>‚úÖ DO</h3>

            
    
<ol>
    <li>
    <p><strong>Implementuj Repository interfaces (Future)</strong>
</p>
<pre><code class="language-">interface AnnouncementRepository {
    public function save(Announcement $announcement): void;
    public function findById(int $id): ?Announcement;
}
</code></pre>
</li>

    <li>
    <p><strong>U≈ºyj Factories dla kompleksowych obiekt√≥w</strong>
</p>
<pre><code class="language-">$entity = AnnouncementFactory::createFromDatabaseRow($row);
</code></pre>
</li>

    <li>
    <p><strong>Abstrakcjonuj external API calls</strong>
</p>
<pre><code class="language-">interface WordApiService {
    public function fetchDailyWord(): Word;
}
</code></pre>
</li>

    <li>
    <p><strong>ZarzƒÖdzaj transakcjami</strong>
</p>
<pre><code class="language-">$this-&gt;pdo-&gt;beginTransaction();
try {
    $this-&gt;repository-&gt;save($entity);
    $this-&gt;pdo-&gt;commit();
} catch (Exception $e) {
    $this-&gt;pdo-&gt;rollBack();
    throw $e;
}
</code></pre>
</li>

    <li>
    <p><strong>Loguj wa≈ºne operacje</strong>
</p>
<pre><code class="language-">$this-&gt;logger-&gt;info(&quot;Announcement approved&quot;, [&#039;id&#039; =&gt; $announcement-&gt;id]);
</code></pre>
</li>

</ol>

    </section>

            <section class="section " id="don-t">
            <h3>‚ùå DON&#039;T</h3>

            
    
<ol>
    <li>
    <p><strong>Nie r√≥b logiki biznesowej w Repository</strong>
</p>
<pre><code class="language-">// ‚ùå WRONG
public function save(Announcement $announcement): void {
    if ($announcement-&gt;title == &#039;&#039;) throw new Exception();
}
</code></pre>
</li>

    <li>
    <p><strong>Nie korzystaj z SQL w Service</strong>
</p>
<pre><code class="language-">// ‚ùå WRONG - Use Repository
$this-&gt;pdo-&gt;query(&quot;SELECT...&quot;);
</code></pre>
</li>

    <li>
    <p><strong>Nie importuj Application w Infrastructure</strong>
</p>
<pre><code class="language-">// ‚ùå WRONG
use App\Application\UseCase\CreateAnnouncementUseCase;
</code></pre>
</li>

    <li>
    <p><strong>Nie cache&#039;uj obiekty bez namys≈Çu</strong>
</p>
<pre><code class="language-">// ‚ö†Ô∏è CAREFUL - Use singleton pattern
private $announcement; // Will be stale!
</code></pre>
</li>

</ol>

            <hr />

    </section>

    </section>

            <section class="section " id="mapowanie-warstw">
            <h2>üìä Mapowanie Warstw</h2>

            <table>
                <thead>
            <tr>
                            <th>Warstwa</th>
                            <th>Komponenty</th>
                            <th>Odpowiedzialno≈õƒá</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td>Domain</td>
            <td>Entity, ValueObject</td>
            <td>Logika biznesowa</td>
    </tr>
    <tr>
            <td>Application</td>
            <td>UseCase, DTO</td>
            <td>Orkiestracja</td>
    </tr>
    <tr>
            <td>Infrastructure</td>
            <td>Repository, Service</td>
            <td>Techniczne szczeg√≥≈Çy</td>
    </tr>
    <tr>
            <td>Presentation</td>
            <td>Controller, Command</td>
            <td>Interfejsy u≈ºytkownika</td>
    </tr>
</tbody>
</table>

    </section>

    </section>

                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
