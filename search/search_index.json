{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"DoDomuDojad\u0119 - Dokumentacja Architektura i API","text":"<p>Witaj w dokumentacji projektu DoDomuDojad\u0119! Ta strona stanowi punkt wyj\u015bcia do zrozumienia struktury i architektury aplikacji.</p>"},{"location":"#struktura-dokumentacji","title":"\ud83d\udcda Struktura Dokumentacji","text":"<ul> <li>Dokumentacja kodu - autogenerowana przy u\u017cyciu phpDocumentator</li> <li>Architektura</li> <li>Warstwy w szczeg\u00f3\u0142ach</li> <li>Przyk\u0142ady - Przyk\u0142ady</li> </ul>"},{"location":"#cechy-projektu","title":"\ud83c\udfaf Cechy Projektu","text":""},{"location":"#stos-technologiczny","title":"Stos Technologiczny","text":"<ul> <li>Backend: PHP 8.3+ z czyst\u0105 architektur\u0105 DDD</li> <li>Framework: W\u0142asna implementacja bez du\u017cych framework\u00f3w</li> <li>Baza Danych: PostgreSQL, SQLite</li> <li>Frontend: HTML, CSS, JavaScript</li> <li>Tools: Composer, NPM, PHPStorm</li> </ul>"},{"location":"#kluczowe-moduy","title":"Kluczowe Modu\u0142y","text":"<ol> <li>Announcements - System og\u0142osze\u0144 z workflow akceptacji</li> <li>Words - S\u0142ownik dziennych s\u0142\u00f3w</li> <li>Quotes - Baza cytat\u00f3w inspiruj\u0105cych</li> <li>Countdown - Odliczanie do wa\u017cnych dat</li> <li>User Management - Zarz\u0105dzanie u\u017cytkownikami</li> </ol>"},{"location":"architecture/","title":"Architektura Domain-Driven Design","text":""},{"location":"architecture/#wstep-do-ddd","title":"Wst\u0119p do DDD","text":"<p>Domain-Driven Design (DDD) to metodologia projektowania software'u, kt\u00f3ra k\u0142adzie nacisk na g\u0142\u0119bokie zrozumienie domeny biznesowej i odzwierciedlenie tej wiedzy w kodzie. Projekt DoDomuDojade implementuje DDD i clean architecture z wyra\u017anym podzia\u0142em na warstwy.</p>"},{"location":"architecture/#gowne-zasady-ddd-w-projekcie","title":"\ud83c\udfaf G\u0142\u00f3wne Zasady DDD w Projekcie","text":""},{"location":"architecture/#1-ubiquity-of-language-wszechobecnosc-jezyka","title":"1. Ubiquity of Language (Wszechobecno\u015b\u0107 J\u0119zyka)","text":"<p>Kod i dokumentacja u\u017cywaj\u0105 jednolitego s\u0142ownika biznesowego: - Announcement \u2014 Og\u0142oszenie - Countdown \u2014 Odliczanie - Quote \u2014 Cytat - Word \u2014 S\u0142owo</p>"},{"location":"architecture/#warstwy-oprogramowania","title":"\ud83c\udfd7\ufe0f Warstwy Oprogramowania","text":""},{"location":"architecture/#warstwa-domain-srcdomain","title":"Warstwa Domain (src/Domain)","text":"<p>Odpowiedzialno\u015b\u0107: Zawiera czyst\u0105 logik\u0119 biznesow\u0105 niezale\u017cn\u0105 od technologii</p> <pre><code>src/Domain/\n\u251c\u2500\u2500 Entity/           # Agregaty i Entity\n\u2502   \u251c\u2500\u2500 Announcement.php\n\u2502   \u251c\u2500\u2500 User.php\n\u2502   \u251c\u2500\u2500 Word.php\n\u2502   \u251c\u2500\u2500 Quote.php\n\u2502   \u251c\u2500\u2500 Module.php\n\u2502   \u2514\u2500\u2500 Countdown.php\n\u251c\u2500\u2500 ValueObject/      # Niezmienne obiekty warto\u015bci\n\u251c\u2500\u2500 Enum/             # Enumeracje dla typ\u00f3w i status\u00f3w\n\u2502   \u251c\u2500\u2500 AnnouncementStatus.php\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 Exception/        # Wyj\u0105tki domenowe\n    \u251c\u2500\u2500 AnnouncementException.php\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"architecture/#entities","title":"Entities","text":"<p>Entity reprezentuje obiekt z unikaln\u0105 to\u017csamo\u015bci\u0105 (ID), kt\u00f3ry zmienia si\u0119 w czasie.</p> <pre><code>// Przyk\u0142ad: Announcement Entity\nfinal class Announcement {\n    public function __construct(\n        public ?int               $id,\n        public string             $title,\n        public string             $text,\n        public DateTimeImmutable  $createdAt,\n        public DateTimeImmutable  $validUntil,\n        public ?int               $userId,\n        public AnnouncementStatus $status = AnnouncementStatus::PENDING,\n        public ?DateTimeImmutable $decidedAt = null,\n        public ?int               $decidedBy = null,\n    ){}\n\n    // Factory methods\n    public static function createNew(...): self { }\n    public static function proposeNew(...): self { }\n\n    // Business methods\n    public function approve(int $decidedBy): void { }\n    public function reject(int $decidedBy): void { }\n    public function isValid(): bool { }\n}\n</code></pre> <p>Cechy Entity: - Ma identyfikator (ID) - Mo\u017ce by\u0107 modyfikowana - Zawiera zachowanie biznesowe (metody) - Definiuje regu\u0142y biznesowe (invariants)</p>"},{"location":"architecture/#value-objects","title":"Value Objects","text":"<p>Value Objects reprezentuj\u0105 warto\u015bci, kt\u00f3re nie zmieniaj\u0105 si\u0119 i nie maj\u0105 to\u017csamo\u015bci.</p> <pre><code>// B\u0119d\u0105 w src/Domain/ValueObject/ gdy zostan\u0105 wprowadzone\n// Przyk\u0142ad: Password\nfinal readonly class Password\n{\n    private string $hash;\n\n    public function __construct(\n        string $plainPassword,\n        int $minLength = 8\n    ) {\n        if (mb_strlen($plainPassword) &lt; $minLength) {\n            throw ValidationException::invalidInput(['password' =&gt; [\"Password too short (min $minLength)\"]]);\n        }\n        $this-&gt;hash = password_hash($plainPassword, PASSWORD_DEFAULT);\n    }\n\n    // Getter\n    public function getHash(): string {}\n\n    // Business logic\n    public function verify(string $plainPassword): bool { }\n}\n</code></pre> <p>Cechy Value Object: - Niezmienno\u015b\u0107 (immutable) - Brak ID - Por\u00f3wnanie po warto\u015bci, nie po referencji - Samodzielna walidacja</p>"},{"location":"architecture/#enums","title":"Enums","text":"<p>Typy i statusy domeny.</p> <pre><code>// Przyk\u0142ad: Announcement Status\nenum AnnouncementStatus {\n    case PENDING;\n    case APPROVED;\n    case REJECTED;\n}\n</code></pre>"},{"location":"architecture/#exceptions","title":"Exceptions","text":"<p>Wyj\u0105tki domenowe reprezentuj\u0105ce b\u0142\u0119dy biznesowe.</p> <pre><code>// W src/Domain/Exception/\nclass AnnouncementException extends DomainException { }\nclass InvalidAnnouncementStatusException extends AnnouncementException { }\n</code></pre>"},{"location":"architecture/#warstwa-application-srcapplication","title":"Warstwa Application (src/Application)","text":"<p>Odpowiedzialno\u015b\u0107: Orkiestracja logiki biznesowej, UseCase-y</p> <pre><code>src/Application/\n\u251c\u2500\u2500 UseCase/              # G\u0142\u00f3wne scenariusze u\u017cytkownika\n\u2502   \u251c\u2500\u2500 Announcement/\n\u2502   \u2502   \u251c\u2500\u2500 CreateAnnouncementUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 ApproveAnnouncementUseCase.php\n\u2502   \u2502   \u2514\u2500\u2500 RejectAnnouncementUseCase.php\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 DataTransferObject/   # Obiekty transferu danych\n    \u251c\u2500\u2500 AnnouncementDTO.php\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"architecture/#use-cases","title":"Use Cases","text":"<p>Use Case opisuje pojedynczy, znacz\u0105cy scenariusz u\u017cytkowania aplikacji.</p> <pre><code>// Struktura Use Case\nclass CreateAnnouncementUseCase {\n    public function __construct(\n        private AnnouncementRepository $repository,\n        // inne zale\u017cno\u015bci\n    ) {}\n\n    public function execute(CreateAnnouncementRequest $request): void {\n        // 1. Validate request\n        // 2. Create domain entity\n        // 3. Call repository to save\n        // 4. Trigger domain events (future)\n    }\n}\n</code></pre> <p>Charakterystyka Use Case: - Jedna odpowiedzialno\u015b\u0107 - Orkiestracja mi\u0119dzy Domain a Infrastructure - Brak logiki biznesowej (deleguje do Domain) - Obs\u0142uguje zdarzenia i b\u0142\u0119dy</p>"},{"location":"architecture/#data-transfer-objects-dtos","title":"Data Transfer Objects (DTOs)","text":"<p>DTO-s transportuj\u0105 dane mi\u0119dzy warstwami bez logiki biznesowej.</p> <pre><code>class AnnouncementDTO {\n    public function __construct(\n        public int    $id,\n        public string $title,\n        public string $text,\n        public string $status,\n        // ... inne pola\n    ) {}\n}\n</code></pre> <p>Kiedy u\u017cywa\u0107 DTO-s: - Transfer danych z HTTP Request/Response - Komunikacja mi\u0119dzy Use Cases - Serializacja/deserializacja</p>"},{"location":"architecture/#warstwa-infrastructure-srcinfrastructure","title":"Warstwa Infrastructure (src/Infrastructure)","text":"<p>Odpowiedzialno\u015b\u0107: Implementacja technicznych szczeg\u00f3\u0142\u00f3w</p> <pre><code>src/Infrastructure/\n\u251c\u2500\u2500 Repository/        # Implementacja repozytori\u00f3w\n\u2502   \u251c\u2500\u2500 AnnouncementRepository.php\n\u2502   \u2514\u2500\u2500 UserRepository.php\n\u251c\u2500\u2500 Service/           # Serwisy zewn\u0119trzne\n\u2502   \u251c\u2500\u2500 ExternalApiService.php\n\u2502   \u2514\u2500\u2500 EmailService.php\n\u251c\u2500\u2500 Factory/           # Fabryki do tworzenia obiekt\u00f3w\n\u251c\u2500\u2500 Security/          # Komponenty bezpiecze\u0144stwa\n\u2502   \u2514\u2500\u2500 AuthenticationService.php\n\u251c\u2500\u2500 Helper/            # Funkcje pomocnicze\n\u251c\u2500\u2500 Translation/       # T\u0142umaczenia\n\u251c\u2500\u2500 Trait/             # Traity wsp\u00f3lne\n\u251c\u2500\u2500 View/              # View helpers\n\u2514\u2500\u2500 Container.php      # DI Container\n</code></pre>"},{"location":"architecture/#repositories","title":"Repositories","text":"<p>Repository abstrahuje dost\u0119p do danych (patrz: Repository Pattern).</p> <pre><code>// Interface w Domain\ninterface AnnouncementRepository {\n    public function save(Announcement $announcement): void;\n    public function findById(int $id): ?Announcement;\n    public function findAll(): array;\n    public function delete(Announcement $announcement): void;\n}\n\n// Implementacja w Infrastructure\nclass DatabaseAnnouncementRepository implements AnnouncementRepository {\n    public function save(Announcement $announcement): void {\n        // SQL INSERT/UPDATE\n    }\n\n    public function findById(int $id): ?Announcement {\n        // SQL SELECT\n    }\n}\n</code></pre> <p>Rola Repository: - Abstrakcja dost\u0119pu do danych - Brak SQL w Domain Layer - \u0141atwa zamiana implementacji (np. mock w testach) - Zgodno\u015b\u0107 z DIP (Dependency Inversion Principle)</p>"},{"location":"architecture/#external-services","title":"External Services","text":"<p>Serwisy integruj\u0105ce si\u0119 z zewn\u0119trznymi API.</p> <pre><code>class ExternalWordService {\n    public function fetchDailyWord(): Word {\n        // HTTP call do external API\n        // Transformacja do Domain Entity\n    }\n}\n\nclass EmailService {\n    public function send(string $email, string $message): void {\n        // Sending email via SMTP/external service\n    }\n}\n</code></pre>"},{"location":"architecture/#factories","title":"Factories","text":"<p>Fabryki tworz\u0105 kompleksowe obiekty.</p> <pre><code>class AnnouncementFactory {\n    public static function createFromRequest(\n        CreateAnnouncementRequest $request\n    ): Announcement {\n        return Announcement::createNew(\n            title: $request-&gt;title,\n            text: $request-&gt;text,\n            validUntil: $request-&gt;validUntil,\n            userId: $request-&gt;userId,\n        );\n    }\n}\n</code></pre>"},{"location":"architecture/#warstwa-presentation-srchttp-srcconsole","title":"Warstwa Presentation (src/Http, src/Console)","text":"<p>Odpowiedzialno\u015b\u0107: Interfejsy u\u017cytkownika (HTTP, CLI)</p> <pre><code>src/Http/\n\u251c\u2500\u2500 Controller/      # HTTP Controllers\n\u2502   \u251c\u2500\u2500 AnnouncementController.php\n\u2502   \u251c\u2500\u2500 UserController.php\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 Response/        # Response helpers\n\nsrc/Console/\n\u2514\u2500\u2500 Command/         # CLI Commands\n    \u251c\u2500\u2500 FetchDailyWordCommand.php\n    \u251c\u2500\u2500 FetchDailyQuoteCommand.php\n    \u2514\u2500\u2500 ...\n</code></pre> <p>Charakterystyka Controllers: - Parsowanie HTTP Request - Delegowanie do Use Case - Formatowanie Response - Obs\u0142uga HTTP specific logic (routing, auth, validation)</p>"},{"location":"architecture/#przepyw-danych","title":"\ud83d\udd04 Przep\u0142yw Danych","text":""},{"location":"architecture/#typowy-scenariusz-tworzenie-ogoszenia","title":"Typowy Scenariusz: Tworzenie Og\u0142oszenia","text":"<pre><code>1. HTTP Request (POST /panel/add_anndouncement)\n        \u2193\n2. Controller (AnnouncementController)\n   - Parsuje request\n   - Tworzy DTO\n        \u2193\n3. Use Case (CreateAnnouncementUseCase)\n   - Tworzy Domain Entity\n        \u2193\n4. Domain Entity (Announcement)\n   - Aplikuje regu\u0142y biznesowe\n        \u2193\n5. Repository Interface\n        \u2193\n6. Repository Implementation (DatabaseAnnouncementRepository)\n   - Wykonuje SQL INSERT\n   - Zwraca entity z ID\n        \u2193\n7. Use Case\n   - Zwraca success\n        \u2193\n8. Controller\n   - Formatuje response\n        \u2193\n9. HTTP Response (201 Created)\n</code></pre> <pre><code>graph TB\n    A[\"HTTP Request&lt;br/&gt;(POST /panel/add_announcement)\"] --&gt;|Parse | B[\"Controller\"]\n    B --&gt;|Execute| C[\"Use Case\"]\n    C --&gt;|Create| D[\"Domain Entity\"]\n    D --&gt;|Follow Business Rules| E[\"Entity Created\"]\n    C --&gt;|Save| F[\"Repository Interface\"]\n    F --&gt;|Implement| G[\"Database&lt;br/&gt;Implementation\"]\n    G --&gt;|SQL INSERT| H[\"Database\"]\n    H --&gt;|Return Entity| G\n    G --&gt;|Return to UseCase| F\n    F --&gt;|Return to UseCase| C\n    C --&gt;|Return to Controller| B\n    B --&gt;|Format Response| I[\"HTTP Response&lt;br/&gt;(201 Created)\"]\n</code></pre>"},{"location":"architecture/#invariants","title":"\ud83d\udee1\ufe0f Invariants","text":"<p>Invariants to regu\u0142y biznesowe, kt\u00f3re musz\u0105 by\u0107 spe\u0142nione.</p>"},{"location":"architecture/#announcement-invariants","title":"Announcement Invariants","text":"<ol> <li>Announcement musi mie\u0107 unikalny tytu\u0142 (w kontek\u015bcie)</li> <li>Announcement musi mie\u0107 <code>validUntil</code> &gt;= <code>createdAt</code></li> <li>Zatwierdzenie zmienia status z PENDING na APPROVED</li> <li>Odrzucenie zmienia status z PENDING na REJECTED</li> <li>Og\u0142oszenie jest wa\u017cne, tylko je\u015bli status = APPROVED i teraz &lt; validUntil</li> </ol> <pre><code>public function isValid(): bool {\n    return $this-&gt;status === AnnouncementStatus::APPROVED\n        &amp;&amp; new DateTimeImmutable() &lt;= $this-&gt;validUntil;\n}\n</code></pre>"},{"location":"architecture/#dependency-injection","title":"\ud83d\udce6 Dependency Injection","text":"<p>Projekt u\u017cywa DI Container (<code>src/Infrastructure/Container.php</code>) zgodny z psr-11 <code>ContainerInterface</code>.</p> <pre><code>// Container Registration\n$container-&gt;register(\n    AnnouncementRepository::class,\n    new DatabaseAnnouncementRepository($pdo)\n);\n\n// Usage in Controller\n$container-&gt;get(AnnouncementRepository::class);\n</code></pre> <p>Zasady: - Domain nie zale\u017cy od Infrastructure - Application zale\u017cy od Domain interfaces - Infrastructure implementuje Domain interfaces - Presentation zale\u017cy od Application i Domain</p>"},{"location":"architecture/#best-practices","title":"\ud83c\udf93 Best Practices","text":""},{"location":"architecture/#domain-layer","title":"Domain Layer","text":"<p>\u2705 DO: - Implementuj regu\u0142y biznesowe - U\u017cywaj Value Objects - Zwracaj Entity z metodami - Definiuj wyj\u0105tki domenowe</p> <p>\u274c DON'T: - Nie importuj Infrastructure - Nie r\u00f3b SQL queries - Nie parsuj JSON/XML - Nie loguj (przynajmniej nie w core)</p>"},{"location":"architecture/#application-layer","title":"Application Layer","text":"<p>\u2705 DO: - Orkiestruj UseCase - Waliduj DTO-s - Transformuj mi\u0119dzy Domain a Presentation</p> <p>\u274c DON'T: - Nie implementuj regu\u0142 biznesowych - Nie bezpo\u015brednio korzystaj z bazy - Nie mieszaj logiki r\u00f3\u017cnych Use Cases</p>"},{"location":"architecture/#infrastructure-layer","title":"Infrastructure Layer","text":"<p>\u2705 DO: - Implementuj Repository interfaces - Integruj z zewn\u0119trznymi serwisami - Zarz\u0105dzaj baza danych - Konfiguruj zale\u017cno\u015bci</p> <p>\u274c DON'T: - Nie implementuj regu\u0142 biznesowych - Nie u\u017cywaj Domain bezpo\u015brednio w SQL - Nie tw\u00f3rz Service Locator (u\u017cywaj DI)</p>"},{"location":"architecture/#presentation-layer","title":"Presentation Layer","text":"<p>\u2705 DO: - Parsuj HTTP requests - Waliduj input - Deleguj do Use Cases - Formatuj responses</p> <p>\u274c DON'T: - Nie implementuj logiki biznesowej - Nie dost\u0119puj bezpo\u015brednio do bazy - Nie r\u00f3b \u017cadnych transformacji Entity</p>"},{"location":"architecture/#relacje-miedzy-warstwami","title":"\ud83d\udd17 Relacje Mi\u0119dzy Warstwami","text":"<pre><code>Domain Layer\n    \u2191\n    \u2502 depends on (implements interface)\n    \u2502\nApplication Layer\n    \u2191\n    \u2502 depends on (calls)\n    \u2502\nPresentation Layer (Http, Console)\n\n\nInfrastructure Layer\n    \u2502 implements\n    \u2193\nDomain Layer (interfaces only)\n</code></pre> <p>Kluczowa Regu\u0142a: Infrastructure NIGDY nie importuje Application, Application importuje Domain interfaces kt\u00f3re s\u0105 implementowane w Infrastructure.</p>"},{"location":"architecture/#namespace-mapping","title":"\ud83d\udcda Namespace Mapping","text":"Warstwa Namespace Przyk\u0142ad Domain <code>App\\Domain\\</code> <code>App\\Domain\\Entity\\Announcement</code> Application <code>App\\Application\\</code> <code>App\\Application\\UseCase\\CreateAnnouncementUseCase</code> Infrastructure <code>App\\Infrastructure\\</code> <code>App\\Infrastructure\\Repository\\DatabaseAnnouncementRepository</code> Presentation <code>App\\Http\\</code> / <code>App\\Console\\</code> <code>App\\Http\\Controller\\AnnouncementController</code>"},{"location":"architecture/#rozszerzanie-projektu","title":"\ud83d\ude80 Rozszerzanie Projektu","text":"<p>Aby doda\u0107 now\u0105 funkcjonalno\u015b\u0107 (np. nowy modu\u0142):</p> <ol> <li> <p>Stw\u00f3rz Entity w Domain <pre><code>// src/Domain/Entity/NewEntity.php\nfinal class NewEntity { }\n</code></pre></p> </li> <li> <p>Zdefiniuj Enums (je\u015bli potrzebne) <pre><code>// src/Domain/Enum/NewEntityStatus.php\nenum NewEntityStatus { }\n</code></pre></p> </li> <li> <p>Stw\u00f3rz Use Cases w Application <pre><code>// src/Application/UseCase/CreateNewEntityUseCase.php\nclass CreateNewEntityUseCase { }\n</code></pre></p> </li> <li> <p>Implementuj Repository w Infrastructure (je\u015bli potrzebne) <pre><code>// src/Infrastructure/Repository/DatabaseNewEntityRepository.php\nclass DatabaseNewEntityRepository { }\n</code></pre></p> </li> <li> <p>Zarejestruj w DI Container <pre><code>// src/Infrastructure/Container.php\n$container-&gt;register(NewEntityRepository::class, $implementation);\n</code></pre></p> </li> </ol>"},{"location":"examples/","title":"Praktyczne Przyk\u0142ady i Wzorce","text":"<p>Rzeczywiste przyk\u0142ady kodu pokazuj\u0105ce jak u\u017cywa\u0107 architektur\u0119 DDD w DoDomuDojad\u0119.</p>"},{"location":"examples/#przykad-1-tworzenie-ogoszenia","title":"\ud83d\udcdd Przyk\u0142ad 1: Tworzenie Og\u0142oszenia","text":""},{"location":"examples/#scenariusz-nowy-admin-chce-stworzyc-ogoszenie","title":"Scenariusz: Nowy admin chce stworzy\u0107 og\u0142oszenie","text":"<pre><code>HTTP POST /api/announcements\n{\n  \"title\": \"Nowe godziny otwarcia\",\n  \"text\": \"Od poniedzia\u0142ku b\u0119dziemy otwarci od 8:00 do 18:00\",\n  \"valid_until\": \"2026-02-01T23:59:59Z\"\n}\n</code></pre>"},{"location":"examples/#krok-1-controller-presentation-layer","title":"Krok 1: Controller (Presentation Layer)","text":"<pre><code>// src/Http/Controller/AnnouncementController.php\nclass AnnouncementController {\n    public function __construct(\n        private Container $container,\n        private LoggerInterface $logger\n    ) {}\n\n    public function create(Request $request): Response {\n        try {\n            // Parse JSON body\n            $data = $request-&gt;json();\n\n            // Create Request object\n            $createRequest = new CreateAnnouncementRequest(\n                title: $data['title'] ?? '',\n                text: $data['text'] ?? '',\n                validUntil: $data['valid_until'] ?? '',\n                userId: $request-&gt;userId() // from JWT token\n            );\n\n            // Validate request\n            $errors = $createRequest-&gt;validate();\n            if (!empty($errors)) {\n                return Response::unprocessableEntity(['errors' =&gt; $errors]);\n            }\n\n            // Get UseCase from DI Container\n            $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);\n\n            // Execute\n            $announcementDTO = $useCase-&gt;execute($createRequest);\n\n            return Response::created([\n                'id' =&gt; $announcementDTO-&gt;id,\n                'title' =&gt; $announcementDTO-&gt;title,\n                'status' =&gt; $announcementDTO-&gt;status,\n                'created_at' =&gt; $announcementDTO-&gt;createdAt\n            ]);\n\n        } catch (ValidationException $e) {\n            return Response::unprocessableEntity(['errors' =&gt; $e-&gt;getErrors()]);\n        } catch (AnnouncementException $e) {\n            return Response::badRequest(['error' =&gt; $e-&gt;getMessage()]);\n        } catch (Exception $e) {\n            $this-&gt;logger-&gt;error(\"Failed to create announcement\", ['error' =&gt; $e]);\n            return Response::internalServerError();\n        }\n    }\n}\n</code></pre>"},{"location":"examples/#krok-2-use-case-application-layer","title":"Krok 2: Use Case (Application Layer)","text":"<pre><code>// src/Application/UseCase/Announcement/CreateAnnouncementUseCase.php\nclass CreateAnnouncementUseCase {\n    public function __construct(\n        private AnnouncementRepository $announcementRepository,\n        private LoggerInterface $logger\n    ) {}\n\n    public function execute(CreateAnnouncementRequest $request): AnnouncementDTO {\n        // Step 1: Validate request\n        $errors = $request-&gt;validate();\n        if (!empty($errors)) {\n            throw new ValidationException($errors);\n        }\n\n        // Step 2: Create Domain Entity using factory\n        $announcement = AnnouncementFactory::createFromRequest(\n            $request,\n            userId: $request-&gt;userId\n        );\n\n        // Step 3: Save to repository\n        $this-&gt;announcementRepository-&gt;save($announcement);\n\n        // Step 4: Log\n        $this-&gt;logger-&gt;info(\"Announcement created\", [\n            'id' =&gt; $announcement-&gt;id,\n            'title' =&gt; $announcement-&gt;title,\n            'userId' =&gt; $request-&gt;userId\n        ]);\n\n        // Step 5: Transform to DTO\n        return AnnouncementDTO::fromEntity($announcement);\n    }\n}\n</code></pre>"},{"location":"examples/#krok-3-factory-infrastructure-layer","title":"Krok 3: Factory (Infrastructure Layer)","text":"<pre><code>// src/Infrastructure/Factory/AnnouncementFactory.php\nclass AnnouncementFactory {\n    public static function createFromRequest(\n        CreateAnnouncementRequest $request,\n        int $userId = null\n    ): Announcement {\n        return Announcement::createNew(\n            title: $request-&gt;title,\n            text: $request-&gt;text,\n            validUntil: new DateTimeImmutable($request-&gt;validUntil),\n            userId: $userId ?? $request-&gt;userId,\n        );\n    }\n}\n</code></pre>"},{"location":"examples/#krok-4-domain-entity-domain-layer","title":"Krok 4: Domain Entity (Domain Layer)","text":"<pre><code>// src/Domain/Entity/Announcement.php\nfinal class Announcement {\n    public function __construct(\n        public ?int               $id,\n        public string             $title,\n        public string             $text,\n        public DateTimeImmutable  $createdAt,\n        public DateTimeImmutable  $validUntil,\n        public ?int               $userId,\n        public AnnouncementStatus $status = AnnouncementStatus::PENDING,\n        public ?DateTimeImmutable $decidedAt = null,\n        public ?int               $decidedBy = null,\n    ){}\n\n    // Factory method - tworzy ju\u017c zatwierdzone og\u0142oszenie\n    public static function createNew(\n        string            $title,\n        string            $text,\n        DateTimeImmutable $validUntil,\n        int               $userId,\n    ): self {\n        return new self(\n            id: null, // Still null, will be set by DB\n            title: $title,\n            text: $text,\n            createdAt: new DateTimeImmutable(),\n            validUntil: $validUntil,\n            userId: $userId,\n            status: AnnouncementStatus::APPROVED,\n            decidedAt: new DateTimeImmutable(),\n            decidedBy: $userId // Admin who created it\n        );\n    }\n}\n</code></pre>"},{"location":"examples/#krok-5-repository-infrastructure-layer","title":"Krok 5: Repository (Infrastructure Layer)","text":"<pre><code>// src/Infrastructure/Repository/DatabaseAnnouncementRepository.php\nclass DatabaseAnnouncementRepository {\n    public function __construct(private PDO $pdo) {}\n\n    public function save(Announcement $announcement): void {\n        if ($announcement-&gt;id === null) {\n            // INSERT\n            $stmt = $this-&gt;pdo-&gt;prepare(\n                'INSERT INTO announcements (\n                    title, text, created_at, valid_until, user_id, status, decided_at, decided_by\n                ) VALUES (\n                    :title, :text, :created_at, :valid_until, :user_id, :status, :decided_at, :decided_by\n                )'\n            );\n\n            $stmt-&gt;execute([\n                ':title' =&gt; $announcement-&gt;title,\n                ':text' =&gt; $announcement-&gt;text,\n                ':created_at' =&gt; $announcement-&gt;createdAt-&gt;format('c'),\n                ':valid_until' =&gt; $announcement-&gt;validUntil-&gt;format('c'),\n                ':user_id' =&gt; $announcement-&gt;userId,\n                ':status' =&gt; $announcement-&gt;status-&gt;name,\n                ':decided_at' =&gt; $announcement-&gt;decidedAt?-&gt;format('c'),\n                ':decided_by' =&gt; $announcement-&gt;decidedBy,\n            ]);\n\n            // Get inserted ID and update entity\n            $announcement-&gt;id = (int) $this-&gt;pdo-&gt;lastInsertId();\n        } else {\n            // UPDATE\n            $stmt = $this-&gt;pdo-&gt;prepare(\n                'UPDATE announcements SET \n                    title = :title, \n                    text = :text, \n                    status = :status, \n                    decided_at = :decided_at, \n                    decided_by = :decided_by \n                WHERE id = :id'\n            );\n\n            $stmt-&gt;execute([\n                ':id' =&gt; $announcement-&gt;id,\n                ':title' =&gt; $announcement-&gt;title,\n                ':text' =&gt; $announcement-&gt;text,\n                ':status' =&gt; $announcement-&gt;status-&gt;name,\n                ':decided_at' =&gt; $announcement-&gt;decidedAt?-&gt;format('c'),\n                ':decided_by' =&gt; $announcement-&gt;decidedBy,\n            ]);\n        }\n    }\n}\n</code></pre>"},{"location":"examples/#krok-6-dto-application-layer","title":"Krok 6: DTO (Application Layer)","text":"<pre><code>// src/Application/DataTransferObject/AnnouncementDTO.php\nfinal class AnnouncementDTO {\n    public function __construct(\n        public int     $id,\n        public string  $title,\n        public string  $text,\n        public string  $createdAt,\n        public string  $validUntil,\n        public ?int    $userId,\n        public string  $status,\n        public ?string $decidedAt,\n        public ?int    $decidedBy,\n    ) {}\n\n    public static function fromEntity(Announcement $entity): self {\n        return new self(\n            id: $entity-&gt;id,\n            title: $entity-&gt;title,\n            text: $entity-&gt;text,\n            createdAt: $entity-&gt;createdAt-&gt;format('c'),\n            validUntil: $entity-&gt;validUntil-&gt;format('c'),\n            userId: $entity-&gt;userId,\n            status: $entity-&gt;status-&gt;name,\n            decidedAt: $entity-&gt;decidedAt?-&gt;format('c'),\n            decidedBy: $entity-&gt;decidedBy,\n        );\n    }\n}\n</code></pre>"},{"location":"examples/#http-response","title":"HTTP Response","text":"<pre><code>HTTP 201 Created\n\n{\n  \"id\": 42,\n  \"title\": \"Nowe godziny otwarcia\",\n  \"status\": \"approved\",\n  \"created_at\": \"2026-01-02T10:42:00Z\"\n}\n</code></pre>"},{"location":"examples/#przykad-2-zatwierdzanie-ogoszenia","title":"\ud83d\udd04 Przyk\u0142ad 2: Zatwierdzanie Og\u0142oszenia","text":""},{"location":"examples/#scenariusz-admin-zatwierdza-oczekujace-ogoszenie","title":"Scenariusz: Admin zatwierdza oczekuj\u0105ce og\u0142oszenie","text":"<pre><code>HTTP POST /api/announcements/{id}/approve\n</code></pre>"},{"location":"examples/#controller","title":"Controller","text":"<pre><code>public function approve(Request $request, int $id): Response {\n    try {\n        $useCase = $this-&gt;container-&gt;get(ApproveAnnouncementUseCase::class);\n        $announcementDTO = $useCase-&gt;execute(\n            announcementId: $id,\n            adminId: $request-&gt;userId()\n        );\n\n        return Response::ok([\n            'message' =&gt; 'Announcement approved',\n            'announcement' =&gt; $announcementDTO\n        ]);\n    } catch (AnnouncementNotFoundException $e) {\n        return Response::notFound(['error' =&gt; 'Announcement not found']);\n    } catch (AnnouncementException $e) {\n        return Response::badRequest(['error' =&gt; $e-&gt;getMessage()]);\n    }\n}\n</code></pre>"},{"location":"examples/#use-case","title":"Use Case","text":"<pre><code>class ApproveAnnouncementUseCase {\n    public function __construct(\n        private AnnouncementRepository $repository\n    ) {}\n\n    public function execute(int $announcementId, int $adminId): AnnouncementDTO {\n        // Pobierz z bazy\n        $announcement = $this-&gt;repository-&gt;findById($announcementId);\n\n        if (!$announcement) {\n            throw new AnnouncementNotFoundException();\n        }\n\n        if ($announcement-&gt;status !== AnnouncementStatus::PENDING) {\n            throw new AnnouncementException(\n                \"Cannot approve announcement that is not pending\"\n            );\n        }\n\n        // Aplikuj regu\u0142y biznesowe (logika w Domain!)\n        $announcement-&gt;approve($adminId);\n\n        // Zapisz\n        $this-&gt;repository-&gt;save($announcement);\n\n        // Zwr\u00f3\u0107 DTO\n        return AnnouncementDTO::fromEntity($announcement);\n    }\n}\n</code></pre>"},{"location":"examples/#domain-entity-business-logic","title":"Domain Entity (Business Logic!)","text":"<pre><code>public function approve(int $decidedBy): void {\n    // Business rule: Only PENDING can be approved\n    // (implicit invariant, enforced by UseCase)\n\n    $this-&gt;status = AnnouncementStatus::APPROVED;\n    $this-&gt;decidedAt = new DateTimeImmutable();\n    $this-&gt;decidedBy = $decidedBy;\n}\n</code></pre>"},{"location":"examples/#przykad-3-rejestracja-uzytkownika","title":"\ud83d\udd10 Przyk\u0142ad 3: Rejestracja U\u017cytkownika","text":""},{"location":"examples/#controller_1","title":"Controller","text":"<pre><code>public function register(Request $request): Response {\n    try {\n        $registerRequest = new RegisterUserRequest(\n            email: $request-&gt;input('email'),\n            password: $request-&gt;input('password'),\n            name: $request-&gt;input('name'),\n            phoneNumber: $request-&gt;input('phone_number')\n        );\n\n        $useCase = $this-&gt;container-&gt;get(RegisterUserUseCase::class);\n        $userDTO = $useCase-&gt;execute($registerRequest);\n\n        return Response::created(['user' =&gt; $userDTO]);\n\n    } catch (ValidationException $e) {\n        return Response::unprocessableEntity(['errors' =&gt; $e-&gt;getErrors()]);\n    } catch (UserException $e) {\n        return Response::badRequest(['error' =&gt; $e-&gt;getMessage()]);\n    }\n}\n</code></pre>"},{"location":"examples/#use-case_1","title":"Use Case","text":"<pre><code>class RegisterUserUseCase {\n    public function __construct(\n        private UserRepository $userRepository,\n        private PasswordHasher $passwordHasher\n    ) {}\n\n    public function execute(RegisterUserRequest $request): UserDTO {\n        // Waliduj\n        $errors = $request-&gt;validate();\n        if (!empty($errors)) {\n            throw new ValidationException($errors);\n        }\n\n        // Sprawd\u017a czy email ju\u017c istnieje\n        if ($this-&gt;userRepository-&gt;existsByEmail($request-&gt;email)) {\n            throw new UserException(\"Email already registered\");\n        }\n\n        // Zahaszuj has\u0142o (Infrastructure concern)\n        $passwordHash = $this-&gt;passwordHasher-&gt;hash($request-&gt;password);\n\n        // Stw\u00f3rz Entity\n        $user = new User(\n            id: null,\n            email: $request-&gt;email,\n            passwordHash: $passwordHash,\n            name: $request-&gt;name,\n            phoneNumber: $request-&gt;phoneNumber,\n            role: 'user' // Default role\n        );\n\n        // Zapisz\n        $this-&gt;userRepository-&gt;save($user);\n\n        // Zwr\u00f3\u0107 DTO (bez has\u0142a!)\n        return UserDTO::fromEntity($user);\n    }\n}\n</code></pre>"},{"location":"examples/#request-object-z-walidacja","title":"Request Object z Walidacj\u0105","text":"<pre><code>class RegisterUserRequest {\n    public function __construct(\n        public string  $email,\n        public string  $password,\n        public string  $name,\n        public ?string $phoneNumber = null\n    ) {}\n\n    public function validate(): array {\n        $errors = [];\n\n        if (empty($this-&gt;email) || !filter_var($this-&gt;email, FILTER_VALIDATE_EMAIL)) {\n            $errors['email'] = 'Valid email is required';\n        }\n\n        if (strlen($this-&gt;password) &lt; 8) {\n            $errors['password'] = 'Password must be at least 8 characters';\n        }\n\n        if (empty($this-&gt;name) || strlen($this-&gt;name) &lt; 2) {\n            $errors['name'] = 'Name must be at least 2 characters';\n        }\n\n        if ($this-&gt;phoneNumber &amp;&amp; !preg_match('/^\\d{9,}$/', $this-&gt;phoneNumber)) {\n            $errors['phone'] = 'Invalid phone number format';\n        }\n\n        return $errors;\n    }\n}\n</code></pre>"},{"location":"examples/#przykad-4-integracja-z-external-api","title":"\ud83d\udcdd Przyk\u0142ad 4: Integracja z External API","text":""},{"location":"examples/#scenariusz-cli-command-pobiera-sowo-dnia","title":"Scenariusz: CLI Command pobiera s\u0142owo dnia","text":""},{"location":"examples/#cli-command-presentation-layer","title":"CLI Command (Presentation Layer)","text":"<pre><code>// src/Console/Command/FetchDailyWordCommand.php\nclass FetchDailyWordCommand {\n    public function __construct(\n        private Container $container,\n        private LoggerInterface $logger\n    ) {}\n\n    public function execute(): void {\n        try {\n            $useCase = $this-&gt;container-&gt;get(FetchAndSaveWordUseCase::class);\n            $wordDTO = $useCase-&gt;execute();\n\n            echo \"\u2713 Word of the day saved: {$wordDTO-&gt;word}\\n\";\n            $this-&gt;logger-&gt;info(\"Daily word fetched\", ['word' =&gt; $wordDTO-&gt;word]);\n\n        } catch (ExternalServiceException $e) {\n            echo \"\u2717 Failed to fetch word: {$e-&gt;getMessage()}\\n\";\n            $this-&gt;logger-&gt;error(\"Failed to fetch daily word\", ['error' =&gt; $e]);\n            exit(1);\n        }\n    }\n}\n</code></pre>"},{"location":"examples/#use-case_2","title":"Use Case","text":"<pre><code>class FetchAndSaveWordUseCase {\n    public function __construct(\n        private ExternalWordApiService $wordService,\n        private WordRepository $wordRepository\n    ) {}\n\n    public function execute(): WordDTO {\n        // Get from external API (Infrastructure)\n        $word = $this-&gt;wordService-&gt;fetchDailyWord();\n\n        // Save to DB (Infrastructure)\n        $this-&gt;wordRepository-&gt;save($word);\n\n        // Return DTO\n        return WordDTO::fromEntity($word);\n    }\n}\n</code></pre>"},{"location":"examples/#external-service","title":"External Service","text":"<pre><code>class ExternalWordApiService {\n    public function __construct(\n        private HttpClient $client,\n        private string $apiKey\n    ) {}\n\n    public function fetchDailyWord(): Word {\n        try {\n            // HTTP Call\n            $response = $this-&gt;client-&gt;get(\n                'https://api.wordapi.com/daily',\n                ['Authorization' =&gt; \"Bearer {$this-&gt;apiKey}\"]\n            );\n\n            if ($response-&gt;status() !== 200) {\n                throw new ExternalServiceException(\n                    \"API returned status {$response-&gt;status()}\"\n                );\n            }\n\n            $data = json_decode($response-&gt;body(), assoc: true);\n\n            // Validate response structure\n            if (!isset($data['word']) || !isset($data['definition'])) {\n                throw new InvalidResponseException(\"Missing required fields\");\n            }\n\n            // Transform to Domain Entity\n            return new Word(\n                id: null,\n                word: $data['word'],\n                definition: $data['definition'],\n                example: $data['example'] ?? '',\n                language: $data['language'] ?? 'en'\n            );\n\n        } catch (HttpException $e) {\n            throw new ExternalServiceException(\"Failed to fetch word\", cause: $e);\n        }\n    }\n}\n</code></pre>"},{"location":"examples/#przykad-5-error-handling","title":"\ud83d\udee1\ufe0f Przyk\u0142ad 5: Error Handling","text":""},{"location":"examples/#hierarchia-wyjatkow","title":"Hierarchia Wyj\u0105tk\u00f3w","text":"<pre><code>// Domain Layer\nnamespace App\\Domain\\Exception;\n\nabstract class DomainException extends Exception {}\nclass AnnouncementException extends DomainException {}\nclass UserException extends DomainException {}\n\n// Application Layer\nnamespace App\\Application\\Exception;\n\nclass ValidationException extends Exception {\n    public function __construct(\n        private array $errors\n    ) {}\n\n    public function getErrors(): array {\n        return $this-&gt;errors;\n    }\n}\n\n// Infrastructure Layer\nnamespace App\\Infrastructure\\Exception;\n\nclass DatabaseException extends Exception {}\nclass ExternalServiceException extends Exception {}\n</code></pre>"},{"location":"examples/#controller-comprehensive-error-handling","title":"Controller - Comprehensive Error Handling","text":"<pre><code>public function create(Request $request): Response {\n    try {\n        // Happy path\n        $request = new CreateAnnouncementRequest(...);\n        $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);\n        $dto = $useCase-&gt;execute($request);\n\n        return Response::created(['data' =&gt; $dto]);\n\n    } catch (ValidationException $e) {\n        // Client error - bad input\n        return Response::unprocessableEntity([\n            'error' =&gt; 'Validation failed',\n            'errors' =&gt; $e-&gt;getErrors()\n        ]);\n\n    } catch (AnnouncementException | UserException $e) {\n        // Business logic error\n        return Response::badRequest([\n            'error' =&gt; $e-&gt;getMessage()\n        ]);\n\n    } catch (DatabaseException $e) {\n        // Infrastructure error\n        $this-&gt;logger-&gt;error(\"Database error\", ['error' =&gt; $e]);\n        return Response::internalServerError([\n            'error' =&gt; 'Failed to save announcement'\n        ]);\n\n    } catch (Exception $e) {\n        // Unexpected error\n        $this-&gt;logger-&gt;critical(\"Unexpected error\", ['error' =&gt; $e]);\n        return Response::internalServerError([\n            'error' =&gt; 'Internal server error'\n        ]);\n    }\n}\n</code></pre>"},{"location":"examples/#diagram-flow-kompletny-scenariusz","title":"\ud83d\udcca Diagram Flow - Kompletny Scenariusz","text":"<pre><code>USER\n  \u2193\nHTTP POST /api/announcements\n  \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   PRESENTATION LAYER         \u2502\n\u2502  (AnnouncementController)    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1. Parse JSON                \u2502\n\u2502 2. Create Request object     \u2502\n\u2502 3. Validate request          \u2502\n\u2502 4. Get UseCase from DI       \u2502\n\u2502 5. Execute UseCase           \u2502\n\u2502 6. Format Response           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   APPLICATION LAYER          \u2502\n\u2502 (CreateAnnouncementUseCase)  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1. Validate request          \u2502\n\u2502 2. Call factory to create    \u2502\n\u2502    domain entity             \u2502\n\u2502 3. Call repository.save()    \u2502\n\u2502 4. Call DTO.fromEntity()     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   DOMAIN LAYER               \u2502\n\u2502   (Announcement Entity)       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - Apply business rules       \u2502\n\u2502 - Ensure invariants          \u2502\n\u2502 - Return to UseCase          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 INFRASTRUCTURE LAYER         \u2502\n\u2502 (DatabaseAnnouncementRepository)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1. SQL INSERT                \u2502\n\u2502 2. Update ID                 \u2502\n\u2502 3. Return to UseCase         \u2502\n\u2502                              \u2502\n\u2502 (Database)                   \u2502\n\u2502 announcements table          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n           HTTP 201\n         (JSON DTO)\n             \u2193\n           USER\n</code></pre>"},{"location":"examples/#szybka-referencja-patternow","title":"\ud83c\udfaf Szybka Referencja Pattern\u00f3w","text":""},{"location":"examples/#tworzenie-entity","title":"Tworzenie Entity","text":"<pre><code>// Factory method w Entity\n$entity = Announcement::createNew(...);\n\n// Lub Factory pattern\n$entity = AnnouncementFactory::createFromRequest($request);\n</code></pre>"},{"location":"examples/#zapisanie-entity","title":"Zapisanie Entity","text":"<pre><code>$repository-&gt;save($entity); // INSERT lub UPDATE\n</code></pre>"},{"location":"examples/#pobranie-entity","title":"Pobranie Entity","text":"<pre><code>$entity = $repository-&gt;findById($id);     // Jedno\n$entities = $repository-&gt;findAll();       // Wiele\n$entities = $repository-&gt;findByStatus(); // Filtr\n</code></pre>"},{"location":"examples/#transformacja-do-dto","title":"Transformacja do DTO","text":"<pre><code>$dto = AnnouncementDTO::fromEntity($entity);\n</code></pre>"},{"location":"examples/#obsuga-bedow","title":"Obs\u0142uga B\u0142\u0119d\u00f3w","text":"<pre><code>if ($errors = $request-&gt;validate()) {\n    throw new ValidationException($errors);\n}\n\nif (!$entity) {\n    throw new EntityNotFoundException();\n}\n\n$entity-&gt;businessMethod(); // Rzuca DomainException je\u015bli invariant naruszony\n</code></pre>"},{"location":"layers/application/","title":"Application Layer - API Reference","text":"<p>Warstwa Application orkiestruje logik\u0119 biznesow\u0105, koordynuj\u0105c interakcje mi\u0119dzy Presentation a Domain Layer.</p>"},{"location":"layers/application/#struktura-application-layer","title":"\ud83d\udccd Struktura Application Layer","text":"<pre><code>src/Application/\n\u251c\u2500\u2500 UseCase/                        # G\u0142\u00f3wne scenariusze u\u017cytkownika\n\u2502   \u251c\u2500\u2500 Announcement/\n\u2502   \u2502   \u251c\u2500\u2500 CreateAnnouncementUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 ApproveAnnouncementUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 RejectAnnouncementUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 DeleteAnnouncementUseCase.php\n\u2502   \u2502   \u2514\u2500\u2500 ListAnnouncementsUseCase.php\n\u2502   \u251c\u2500\u2500 Word/\n\u2502   \u2502   \u251c\u2500\u2500 CreateWordUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 UpdateWordUseCase.php\n\u2502   \u2502   \u2514\u2500\u2500 ListWordsUseCase.php\n\u2502   \u251c\u2500\u2500 Quote/\n\u2502   \u2502   \u2514\u2500\u2500 ... (similar structure)\n\u2502   \u251c\u2500\u2500 User/\n\u2502   \u2502   \u251c\u2500\u2500 RegisterUserUseCase.php\n\u2502   \u2502   \u251c\u2500\u2500 LoginUserUseCase.php\n\u2502   \u2502   \u2514\u2500\u2500 UpdateUserUseCase.php\n\u2502   \u2514\u2500\u2500 Module/\n\u2502       \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 DataTransferObject/             # Data Transfer Objects\n    \u251c\u2500\u2500 AnnouncementDTO.php\n    \u251c\u2500\u2500 UserDTO.php\n    \u251c\u2500\u2500 WordDTO.php\n    \u251c\u2500\u2500 QuoteDTO.php\n    \u2514\u2500\u2500 ...\n</code></pre> <p>Namespace: <code>App\\Application\\</code></p>"},{"location":"layers/application/#use-cases","title":"\ud83c\udfac Use Cases","text":"<p>Use Case reprezentuje pojedynczy, znacz\u0105cy scenariusz dzia\u0142ania aplikacji.</p>"},{"location":"layers/application/#data-transfer-objects-dtos","title":"\ud83d\udce6 Data Transfer Objects (DTOs)","text":"<p>DTOs transportuj\u0105 dane mi\u0119dzy warstwami bez logiki biznesowej.</p>"},{"location":"layers/application/#typowy-flow-use-case","title":"\ud83d\udd04 Typowy Flow Use Case","text":"<pre><code>HTTP Request\n    \u2193\nController\n\u251c\u2500 1. Parse request \u2192 AnnouncementDTO\n\u251c\u2500 2. Call useCase-&gt;execute($dto)\n    \u2193\nUseCase\n\u251c\u2500 1. Validate request ($request-&gt;validate())\n\u251c\u2500 2. Create Domain Entity (Announcement::createNew())\n\u251c\u2500 3. Save via Repository\n\u251c\u2500 4. Return success\n    \u2193\nController\n\u251c\u2500 1. Return HTTP Response\n    \u2193\nHTTP Response (JSON)\n</code></pre> <pre><code>graph TB\n    A[\"HTTP Request&lt;br/&gt;(POST /panel/add_announcement)\"] --&gt;|Parse| B[\"Controller\"]\n    B --&gt;|Extract Data| C[\"Request Object\"]\n    C --&gt;|Pass to| D[\"UseCase\"]\n    D --&gt;|Validate| C\n    D --&gt;|Check Entity| E[\"Domain Entity\"]\n    E --&gt;|Apply Rules| F[\"Valid Entity\"]\n    D --&gt;|Save| G[\"Repository\"]\n    G --&gt;|SQL INSERT| H[\"Database\"]\n    H --&gt;|Return| G\n    G --&gt;|Return to UseCase| D\n    D --&gt;|Transform| I[\"DTO\"]\n    I --&gt;|Return to Controller| B\n    B --&gt;|Format| J[\"JSON Response\"]\n    J --&gt;|Send| K[\"HTTP Response\"]\n</code></pre>"},{"location":"layers/application/#exception-handling","title":"\ud83d\udee1\ufe0f Exception Handling","text":"<p>Use Cases powinny zg\u0142asza\u0107 wyj\u0105tki domenowe, kt\u00f3re s\u0105 obs\u0142ugiwane na level Controllera.</p> <pre><code>// UseCase\ntry {\n    $announcement = $this-&gt;repository-&gt;findById($id);\n    if (!$announcement) {\n        throw new AnnouncementNotFoundException();\n    }\n} catch (DatabaseException $e) {\n    throw new AnnouncementException(\"Failed to fetch announcement\");\n}\n\n// Controller\ntry {\n    $dto = $this-&gt;useCase-&gt;execute($request);\n    return Response::ok($dto);\n} catch (AnnouncementNotFoundException $e) {\n    return Response::notFound(\"Announcement not found\");\n} catch (AnnouncementException $e) {\n    return Response::badRequest($e-&gt;getMessage());\n} catch (ValidationException $e) {\n    return Response::unprocessableEntity($e-&gt;getErrors());\n} catch (Exception $e) {\n    $this-&gt;logger-&gt;error($e);\n    return Response::internalServerError();\n}\n</code></pre>"},{"location":"layers/application/#request-usecase-response-pattern","title":"\ud83d\udcca Request \u2192 UseCase \u2192 Response Pattern","text":"Etap Komponent Format 1 HTTP Body JSON 2 Controller Array 3 Request Object Typed Object 4 UseCase DTO 5 Response JSON"},{"location":"layers/application/#best-practices","title":"\ud83c\udf93 Best Practices","text":""},{"location":"layers/application/#do","title":"\u2705 DO","text":"<ol> <li> <p>Waliduj ka\u017cdy Request <pre><code>$errors = $request-&gt;validate();\nif (!empty($errors)) {\n    throw new ValidationException($errors);\n}\n</code></pre></p> </li> <li> <p>U\u017cyj jednego Use Case na scenariusz <pre><code>// \u2705 GOOD\nclass CreateAnnouncementUseCase { }\nclass ApproveAnnouncementUseCase { }\n\n// \u274c BAD\nclass AnnouncementUseCase { // trop wiele odpowiedzialno\u015bci\n}\n</code></pre></p> </li> <li> <p>Transformuj Entity do DTOs <pre><code>$dto = AnnouncementDTO::fromEntity($entity);\nreturn $dto;\n</code></pre></p> </li> <li> <p>Deleguj logik\u0119 biznesow\u0105 do Domain <pre><code>$announcement-&gt;approve($adminId); // Domain handles rules\n</code></pre></p> </li> <li> <p>Obs\u0142uguj wyj\u0105tki domenowe <pre><code>} catch (AnnouncementException $e) {\n    return Response::badRequest($e-&gt;getMessage());\n}\n</code></pre></p> </li> </ol>"},{"location":"layers/application/#dont","title":"\u274c DON'T","text":"<ol> <li> <p>Nie r\u00f3b SQL w Use Case <pre><code>// \u274c WRONG\n$result = $this-&gt;pdo-&gt;query(\"SELECT...\");\n</code></pre></p> </li> <li> <p>Nie mieszaj logiki z r\u00f3\u017cnych scenariuszy <pre><code>// \u274c WRONG\nclass AnnouncementUseCase {\n    public function create() { }\n    public function approve() { }\n    public function list() { }\n}\n</code></pre></p> </li> <li> <p>Nie zwracaj Entity bezpo\u015brednio <pre><code>// \u274c WRONG\nreturn $entity; // Expose domain model\n\n// \u2705 RIGHT\nreturn AnnouncementDTO::fromEntity($entity);\n</code></pre></p> </li> <li> <p>Nie pomi\u0144 walidacji <pre><code>// \u274c WRONG\npublic function execute($request) {\n    // Assume input is valid\n}\n\n// \u2705 RIGHT\npublic function execute($request) {\n    $errors = $request-&gt;validate();\n    if (!empty($errors)) throw new ValidationException();\n}\n</code></pre></p> </li> </ol>"},{"location":"layers/application/#use-case-checklist","title":"\ud83d\udcda Use Case Checklist","text":"<p>Przy tworzeniu nowego Use Case pami\u0119taj, aby:</p> <ul> <li>[ ] Unikalny scenariusz (jedna odpowiedzialno\u015b\u0107)</li> <li>[ ] Request object z walidacj\u0105</li> <li>[ ] Walidacja w execute()</li> <li>[ ] Domain Entity creation/manipulation</li> <li>[ ] Repository call (save, find, etc)</li> <li>[ ] Exception handling</li> <li>[ ] DTO transformation</li> <li>[ ] Clear return type</li> <li>[ ] Unit tests</li> <li>[ ] Documentation</li> </ul>"},{"location":"layers/domain/","title":"Domain Layer - API Reference","text":"<p>Warstwa Domain zawiera czyst\u0105 logik\u0119 biznesow\u0105 projektu DoDomuDojad\u0119, niezale\u017cn\u0105 od technicznych szczeg\u00f3\u0142\u00f3w implementacji.</p>"},{"location":"layers/domain/#struktura-domain-layer","title":"\ud83d\udccd Struktura Domain Layer","text":"<pre><code>src/Domain/\n\u251c\u2500\u2500 Entity/               # G\u0142\u00f3wne agregaty i entity\n\u2502   \u251c\u2500\u2500 Announcement.php  # Og\u0142oszenia\n\u2502   \u251c\u2500\u2500 User.php          # U\u017cytkownicy\n\u2502   \u251c\u2500\u2500 Word.php          # S\u0142owa dnia\n\u2502   \u251c\u2500\u2500 Quote.php         # Cytaty\n\u2502   \u251c\u2500\u2500 Module.php        # Modu\u0142y\n\u2502   \u2514\u2500\u2500 Countdown.php     # Odliczanie\n\u251c\u2500\u2500 Enum/                 # Enumeracje\n\u2502   \u251c\u2500\u2500 AnnouncementStatus.php\n\u2502   \u251c\u2500\u2500 UserRole.php\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 ValueObject/          # Niezmienne obiekty warto\u015bci\n\u2502   \u2514\u2500\u2500 (b\u0119d\u0105 rozwijane w przysz\u0142o\u015bci)\n\u2514\u2500\u2500 Exception/            # Wyj\u0105tki domenowe\n    \u251c\u2500\u2500 DomainException.php\n    \u251c\u2500\u2500 AnnouncementException.php\n    \u2514\u2500\u2500 ...\n</code></pre> <p>Namespace: <code>App\\Domain\\</code></p>"},{"location":"layers/domain/#entities-agregaty","title":"\ud83c\udfaf Entities (Agregaty)","text":""},{"location":"layers/domain/#announcement-entity","title":"Announcement Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/Announcement.php</code></p> <p>G\u0142\u00f3wny agregat zarz\u0105dzaj\u0105cy og\u0142oszeniami w aplikacji.</p>"},{"location":"layers/domain/#charakterystyka","title":"Charakterystyka","text":"<ul> <li>ID: Unikalne w systemie</li> <li>Status: PENDING, APPROVED, REJECTED</li> <li>Workflow: Proposal \u2192 Review \u2192 Approval/Rejection</li> <li>Lifecycle: Od stworzenia do wyga\u015bni\u0119cia</li> </ul>"},{"location":"layers/domain/#konstruktor","title":"Konstruktor","text":"<pre><code>public function __construct(\n    public ?int               $id,\n    public string             $title,\n    public string             $text,\n    public DateTimeImmutable  $createdAt,\n    public DateTimeImmutable  $validUntil,\n    public ?int               $userId,\n    public AnnouncementStatus $status = AnnouncementStatus::PENDING,\n    public ?DateTimeImmutable $decidedAt = null,\n    public ?int               $decidedBy = null,\n)\n</code></pre>"},{"location":"layers/domain/#wasciwosci","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator (null dla nowych) <code>$title</code> <code>string</code> Tytu\u0142 og\u0142oszenia <code>$text</code> <code>string</code> Tre\u015b\u0107 og\u0142oszenia <code>$createdAt</code> <code>DateTimeImmutable</code> Data utworzenia <code>$validUntil</code> <code>DateTimeImmutable</code> Data wyga\u015bni\u0119cia <code>$userId</code> <code>?int</code> ID tw\u00f3rcy/zatwierdzaj\u0105cego <code>$status</code> <code>AnnouncementStatus</code> Status (PENDING/APPROVED/REJECTED) <code>$decidedAt</code> <code>?DateTimeImmutable</code> Data zatwierdzenia/odrzucenia <code>$decidedBy</code> <code>?int</code> ID osoby zatwierdzaj\u0105cej"},{"location":"layers/domain/#factory-methods","title":"Factory Methods","text":"<p>createNew() - Stw\u00f3rz nowe og\u0142oszenie od razu zatwierdzone <pre><code>public static function createNew(\n    string            $title,\n    string            $text,\n    DateTimeImmutable $validUntil,\n    int               $userId,\n): self\n</code></pre> Parametry: - <code>$title</code>: Tytu\u0142 og\u0142oszenia - <code>$text</code>: Tre\u015b\u0107 og\u0142oszenia - <code>$validUntil</code>: Data wyga\u015bni\u0119cia - <code>$userId</code>: ID u\u017cytkownika tworz\u0105cego</p> <p>Zwraca: Nowy agregat z statusem APPROVED</p> <p>U\u017cycie: <pre><code>$announcement = Announcement::createNew(\n    title: \"Nowe godziny otwarcia\",\n    text: \"Od poniedzia\u0142ku zmieniamy godziny...\",\n    validUntil: new DateTimeImmutable('2026-02-01'),\n    userId: 1\n);\n</code></pre></p> <p>proposeNew() - Stw\u00f3rz nowe og\u0142oszenie czekaj\u0105ce na zatwierdzenie <pre><code>public static function proposeNew(\n    string $title,\n    string $text,\n    DateTimeImmutable $validUntil\n): self\n</code></pre> Parametry: - <code>$title</code>: Tytu\u0142 og\u0142oszenia - <code>$text</code>: Tre\u015b\u0107 og\u0142oszenia - <code>$validUntil</code>: Data wyga\u015bni\u0119cia</p> <p>Zwraca: Nowy agregat z statusem PENDING</p> <p>U\u017cycie: <pre><code>$announcement = Announcement::proposeNew(\n    title: \"Propozycja nowego og\u0142oszenia\",\n    text: \"To jest propozycja kt\u00f3r\u0105 admin b\u0119dzie recenzowa\u0107\",\n    validUntil: new DateTimeImmutable('+1 month')\n);\n</code></pre></p>"},{"location":"layers/domain/#business-methods","title":"Business Methods","text":"<p>approve() - Zatwierd\u017a og\u0142oszenie <pre><code>public function approve(int $decidedBy): void\n</code></pre> Parametry: - <code>$decidedBy</code>: ID u\u017cytkownika zatwierdzaj\u0105cego (admina)</p> <p>Efekty: - Zmienia status na APPROVED - Ustawia <code>$decidedAt</code> na bie\u017c\u0105cy czas - Ustawia <code>$decidedBy</code> na ID zatwierdzaj\u0105cego</p> <p>Invariants: - Status musi by\u0107 PENDING - <code>$decidedBy</code> musi by\u0107 wa\u017cnym ID u\u017cytkownika</p> <p>U\u017cycie: <pre><code>if ($announcement-&gt;status === AnnouncementStatus::PENDING) {\n    $announcement-&gt;approve(adminId: 2);\n}\n</code></pre></p> <p>reject() - Odrzu\u0107 og\u0142oszenie <pre><code>public function reject(int $decidedBy): void\n</code></pre> Parametry: - <code>$decidedBy</code>: ID u\u017cytkownika odrzucaj\u0105cego (admina)</p> <p>Efekty: - Zmienia status na REJECTED - Ustawia <code>$decidedAt</code> na bie\u017c\u0105cy czas - Ustawia <code>$decidedBy</code> na ID odrzucaj\u0105cego</p> <p>Invariants: - Status musi by\u0107 PENDING - <code>$decidedBy</code> musi by\u0107 wa\u017cnym ID u\u017cytkownika</p> <p>U\u017cycie: <pre><code>if ($announcement-&gt;status === AnnouncementStatus::PENDING) {\n    $announcement-&gt;reject(adminId: 2);\n}\n</code></pre></p> <p>isValid() - Sprawd\u017a czy og\u0142oszenie jest wa\u017cne (aktualnie widoczne) <pre><code>public function isValid(): bool\n</code></pre></p> <p>Zwraca: <code>true</code> je\u015bli: - Status = APPROVED - Bie\u017c\u0105cy czas &lt;= validUntil</p> <p>U\u017cycie: <pre><code>if ($announcement-&gt;isValid()) {\n    // Wy\u015bwietl og\u0142oszenie u\u017cytkownikowi\n    displayAnnouncement($announcement);\n}\n</code></pre></p>"},{"location":"layers/domain/#user-entity","title":"User Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/User.php</code></p> <p>Entity reprezentuj\u0105ca u\u017cytkownika systemu.</p> <pre><code>final class User {\n    public function __construct(\n        public ?int    $id,\n        public string  $email,\n        public string  $passwordHash,\n        public string  $name,\n        public ?string $phoneNumber = null,\n        public string  $role = 'user'\n    )\n}\n</code></pre>"},{"location":"layers/domain/#wasciwosci_1","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator <code>$email</code> <code>string</code> Email u\u017cytkownika <code>$passwordHash</code> <code>string</code> Zahaszowane has\u0142o <code>$name</code> <code>string</code> Nazwa u\u017cytkownika <code>$phoneNumber</code> <code>?string</code> Numer telefonu (opcjonalnie) <code>$role</code> <code>string</code> Rola (user, admin, moderator)"},{"location":"layers/domain/#word-entity","title":"Word Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/Word.php</code></p> <p>Entity reprezentuj\u0105ca s\u0142owo dnia.</p> <pre><code>final class Word {\n    public function __construct(\n        public ?int    $id,\n        public string  $word,\n        public string  $definition,\n        public string  $example,\n        public string  $language = 'pl'\n    )\n}\n</code></pre>"},{"location":"layers/domain/#wasciwosci_2","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator <code>$word</code> <code>string</code> S\u0142owo <code>$definition</code> <code>string</code> Definicja <code>$example</code> <code>string</code> Przyk\u0142ad u\u017cycia <code>$language</code> <code>string</code> J\u0119zyk (domy\u015blnie polski)"},{"location":"layers/domain/#quote-entity","title":"Quote Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/Quote.php</code></p> <p>Entity reprezentuj\u0105ca cytat inspiruj\u0105cy.</p> <pre><code>final class Quote {\n    public function __construct(\n        public ?int    $id,\n        public string  $text,\n        public string  $author,\n        public string  $category = 'general'\n    )\n}\n</code></pre>"},{"location":"layers/domain/#wasciwosci_3","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator <code>$text</code> <code>string</code> Tekst cytatu <code>$author</code> <code>string</code> Autor cytatu <code>$category</code> <code>string</code> Kategoria cytatu"},{"location":"layers/domain/#module-entity","title":"Module Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/Module.php</code></p> <p>Entity reprezentuj\u0105ca modu\u0142 funkcjonalny aplikacji.</p> <pre><code>final class Module {\n    public function __construct(\n        public ?int    $id,\n        public string  $name,\n        public string  $description,\n        public bool    $enabled = true\n    )\n}\n</code></pre>"},{"location":"layers/domain/#wasciwosci_4","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator <code>$name</code> <code>string</code> Nazwa modu\u0142u <code>$description</code> <code>string</code> Opis modu\u0142u <code>$enabled</code> <code>bool</code> Czy modu\u0142 jest w\u0142\u0105czony"},{"location":"layers/domain/#countdown-entity","title":"Countdown Entity","text":"<p>Lokalizacja: <code>src/Domain/Entity/Countdown.php</code></p> <p>Entity reprezentuj\u0105ca odliczanie do wa\u017cnego zdarzenia.</p> <pre><code>final class Countdown {\n    public function __construct(\n        public ?int              $id,\n        public string            $title,\n        public DateTimeImmutable $targetDate,\n        public string            $description = ''\n    )\n}\n</code></pre>"},{"location":"layers/domain/#wasciwosci_5","title":"W\u0142a\u015bciwo\u015bci","text":"W\u0142a\u015bciwo\u015b\u0107 Typ Opis <code>$id</code> <code>?int</code> Unikalny identyfikator <code>$title</code> <code>string</code> Tytu\u0142 odliczania <code>$targetDate</code> <code>DateTimeImmutable</code> Data docelowa <code>$description</code> <code>string</code> Opis zdarzenia"},{"location":"layers/domain/#enums-enumeracje","title":"\ud83c\udff7\ufe0f Enums (Enumeracje)","text":""},{"location":"layers/domain/#announcementstatus-enum","title":"AnnouncementStatus Enum","text":"<p>Lokalizacja: <code>src/Domain/Enum/AnnouncementStatus.php</code></p> <p>Status og\u0142oszenia w workflow.</p> <pre><code>enum AnnouncementStatus {\n    case PENDING;      // Oczekuje na zatwierdzenie\n    case APPROVED;     // Zatwierdzone i widoczne\n    case REJECTED;     // Odrzucone\n}\n</code></pre>"},{"location":"layers/domain/#stany-transitional","title":"Stany Transitional","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 PENDING \u2502\n\u251c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2524\n\u2502    \u2502    \u2502\n\u25bc    \u25bc    \u2502\nAPPROVED  REJECTED\n</code></pre> <p>Przej\u015bcia: - PENDING \u2192 APPROVED (approve) - PENDING \u2192 REJECTED (reject) - APPROVED \u219b (terminal state) - REJECTED \u219b (terminal state)</p>"},{"location":"layers/domain/#uzycie","title":"U\u017cycie","text":"<pre><code>// Sprawdzenie statusu\nif ($announcement-&gt;status === AnnouncementStatus::PENDING) {\n    // Czeka na zatwierdzenie\n}\n\n// Walidacja przej\u015bcia\nif ($announcement-&gt;status === AnnouncementStatus::PENDING) {\n    $announcement-&gt;approve($userId);\n}\n</code></pre>"},{"location":"layers/domain/#exceptions-wyjatki-domenowe","title":"\u26a0\ufe0f Exceptions (Wyj\u0105tki Domenowe)","text":"<p>Lokalizacja: <code>src/Domain/Exception/</code></p>"},{"location":"layers/domain/#domainexception-abstract-base","title":"DomainException (Abstract Base)","text":"<pre><code>abstract class DomainException extends Exception\n</code></pre> <p>Bazowa klasa dla wszystkich wyj\u0105tk\u00f3w domenowych.</p> <p>Charakterystyka: - Reprezentuje b\u0142\u0119dy biznesowe, nie techniczne - Powinna by\u0107 obs\u0142ugiwana na poziomie Application - Zawiera informacje dla u\u017cytkownika</p>"},{"location":"layers/domain/#announcementexception","title":"AnnouncementException","text":"<pre><code>class AnnouncementException extends DomainException\n</code></pre> <p>Wyj\u0105tek dla b\u0142\u0119d\u00f3w zwi\u0105zanych z Announcement.</p> <p>Przyk\u0142ady: <pre><code>throw new AnnouncementException(\n    \"Nie mo\u017cna zatwierdzi\u0107 og\u0142oszenia kt\u00f3re nie jest w stanie PENDING\"\n);\n</code></pre></p>"},{"location":"layers/domain/#value-objects-przyszosc","title":"\ud83d\udccb Value Objects (Przysz\u0142o\u015b\u0107)","text":"<p>Value Objects b\u0119d\u0105 wprowadzane w przysz\u0142o\u015bci dla:</p>"},{"location":"layers/domain/#email-value-object","title":"Email Value Object","text":"<pre><code>final class Email {\n    private function __construct(\n        public readonly string $value\n    ) {\n        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            throw new InvalidEmailException();\n        }\n    }\n\n    public static function create(string $value): self {\n        return new self($value);\n    }\n\n    public function equals(Email $other): bool {\n        return $this-&gt;value === $other-&gt;value;\n    }\n}\n</code></pre>"},{"location":"layers/domain/#phonenumber-value-object","title":"PhoneNumber Value Object","text":"<pre><code>final class PhoneNumber {\n    private function __construct(\n        public readonly string $value\n    ) {\n        // Walidacja formatu telefonu\n    }\n}\n</code></pre>"},{"location":"layers/domain/#daterange-value-object","title":"DateRange Value Object","text":"<pre><code>final class DateRange {\n    public function __construct(\n        public readonly DateTimeImmutable $startDate,\n        public readonly DateTimeImmutable $endDate\n    ) {\n        if ($startDate &gt; $endDate) {\n            throw new InvalidDateRangeException();\n        }\n    }\n\n    public function contains(DateTimeImmutable $date): bool {\n        return $date &gt;= $this-&gt;startDate &amp;&amp; $date &lt;= $this-&gt;endDate;\n    }\n}\n</code></pre>"},{"location":"layers/domain/#best-practices-w-domain-layer","title":"\ud83c\udf93 Best Practices w Domain Layer","text":""},{"location":"layers/domain/#do","title":"\u2705 DO","text":"<ol> <li> <p>Umieszczaj logik\u0119 biznesow\u0105 w Entity <pre><code>public function isValid(): bool {\n    return $this-&gt;status === AnnouncementStatus::APPROVED\n        &amp;&amp; new DateTimeImmutable() &lt;= $this-&gt;validUntil;\n}\n</code></pre></p> </li> <li> <p>U\u017cywaj Value Objects do walidacji <pre><code>public function __construct(\n    public Email $email,\n    public PhoneNumber $phone\n)\n</code></pre></p> </li> <li> <p>Definiuj invariants explicite <pre><code>// Og \u0142oszenie mo\u017ce by\u0107 zatwierdzone tylko je\u015bli by\u0142o w stanie PENDING\npublic function approve(int $decidedBy): void {\n    // implicit invariant check\n    $this-&gt;status = AnnouncementStatus::APPROVED;\n}\n</code></pre></p> </li> <li> <p>Zwracaj Entity ze statycznych metod <pre><code>public static function createNew(...): self {\n    return new self(...);\n}\n</code></pre></p> </li> </ol>"},{"location":"layers/domain/#dont","title":"\u274c DON'T","text":"<ol> <li> <p>Nie importuj Infrastructure w Domain <pre><code>// \u274c WRONG\nuse App\\Infrastructure\\Repository\\AnnouncementRepository;\n</code></pre></p> </li> <li> <p>Nie r\u00f3b SQL queries w Entity <pre><code>// \u274c WRONG\n$result = $this-&gt;pdo-&gt;query(\"SELECT...\");\n</code></pre></p> </li> <li> <p>Nie parsuj JSON/XML w Entity <pre><code>// \u274c WRONG\n$data = json_decode($request-&gt;getBody());\n</code></pre></p> </li> <li> <p>Nie u\u017cywaj getters/setters dla wszystkiego <pre><code>// \u274c WRONG\npublic function getStatus() { return $this-&gt;status; }\npublic function setStatus($status) { $this-&gt;status = $status; }\n\n// \u2705 RIGHT\npublic function approve($userId) { \n    // apply business rules\n    $this-&gt;status = AnnouncementStatus::APPROVED;\n}\n</code></pre></p> </li> </ol>"},{"location":"layers/domain/#relacje-miedzy-entities","title":"\ud83d\udd17 Relacje Mi\u0119dzy Entities","text":"<pre><code>graph TB\n    A[\"Announcement\"] --&gt;|userId| B[\"User\"]\n    B --&gt;|has many| A\n    C[\"Module\"] --&gt;|has many| D[\"Items\"]\n    E[\"Word\"] --&gt;|created by| B\n    F[\"Quote\"] --&gt;|created by| B\n    G[\"Countdown\"] --&gt;|tracked by| B\n</code></pre>"},{"location":"layers/domain/#complete-domain-namespace-reference","title":"\ud83d\udcca Complete Domain Namespace Reference","text":"Klasa Lokalizacja Typ Opis Announcement Entity/ Entity Og\u0142oszenie User Entity/ Entity U\u017cytkownik Word Entity/ Entity S\u0142owo dnia Quote Entity/ Entity Cytat Module Entity/ Entity Modu\u0142 Countdown Entity/ Entity Odliczanie AnnouncementStatus Enum/ Enum Status og\u0142oszenia DomainException Exception/ Abstract Bazowy wyj\u0105tek AnnouncementException Exception/ Exception Wyj\u0105tek dla Announcement"},{"location":"layers/infrastructure/","title":"Infrastructure Layer - API Reference","text":"<p>Warstwa Infrastructure zawiera implementacj\u0119 technicznych szczeg\u00f3\u0142\u00f3w, integracje z zewn\u0119trznymi serwisami i zarz\u0105dzaniem danymi.</p>"},{"location":"layers/infrastructure/#struktura-infrastructure-layer","title":"\ud83d\udccd Struktura Infrastructure Layer","text":"<pre><code>src/Infrastructure/\n\u251c\u2500\u2500 Container.php                # Dependency Injection Container\n\u251c\u2500\u2500 Repository/                  # Data Access Layer\n\u2502   \u251c\u2500\u2500 DatabaseAnnouncementRepository.php\n\u2502   \u251c\u2500\u2500 DatabaseUserRepository.php\n\u2502   \u251c\u2500\u2500 DatabaseWordRepository.php\n\u2502   \u251c\u2500\u2500 DatabaseQuoteRepository.php\n\u2502   \u2514\u2500\u2500 DatabaseCountdownRepository.php\n\u251c\u2500\u2500 Service/                     # External Services\n\u2502   \u251c\u2500\u2500 ExternalWordApiService.php\n\u2502   \u251c\u2500\u2500 ExternalQuoteApiService.php\n\u2502   \u251c\u2500\u2500 EmailService.php\n\u2502   \u2514\u2500\u2500 LoggerService.php\n\u251c\u2500\u2500 Factory/                     # Object Creation\n\u2502   \u251c\u2500\u2500 AnnouncementFactory.php\n\u2502   \u251c\u2500\u2500 UserFactory.php\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 Security/                    # Security &amp; Auth\n\u2502   \u251c\u2500\u2500 PasswordHasher.php\n\u2502   \u251c\u2500\u2500 TokenGenerator.php\n\u2502   \u2514\u2500\u2500 AuthenticationService.php\n\u251c\u2500\u2500 Helper/                      # Utility Functions\n\u2502   \u251c\u2500\u2500 DateHelper.php\n\u2502   \u251c\u2500\u2500 StringHelper.php\n\u2502   \u2514\u2500\u2500 ValidationHelper.php\n\u251c\u2500\u2500 Translation/                 # Internationalization\n\u2502   \u2514\u2500\u2500 TranslationService.php\n\u251c\u2500\u2500 Trait/                       # Shared Traits\n\u2502   \u2514\u2500\u2500 TimestampableTrait.php\n\u2514\u2500\u2500 View/                        # View Helpers\n    \u2514\u2500\u2500 TemplateRenderer.php\n</code></pre> <p>Namespace: <code>App\\Infrastructure\\</code></p>"},{"location":"layers/infrastructure/#repositories","title":"\ud83d\udd0c Repositories","text":"<p>Repositories implementuj\u0105 abstrakcj\u0119 dost\u0119pu do danych (patrz: Repository Pattern).</p>"},{"location":"layers/infrastructure/#databaseannouncementrepository","title":"DatabaseAnnouncementRepository","text":"<p>Lokalizacja: <code>src/Infrastructure/Repository/DatabaseAnnouncementRepository.php</code></p> <p>Odpowiedzialno\u015b\u0107: Persystencja danych Announcement w bazie danych</p> <p>Implementuje: <code>AnnouncementRepositoryInterface</code> (Future)</p> <p>Zale\u017cno\u015bci: <pre><code>public function __construct(\n    private PDO $pdo\n)\n</code></pre></p>"},{"location":"layers/infrastructure/#saveannouncement-announcement-void","title":"save(Announcement $announcement): void","text":"<p>Zapisz (lub zaktualizuj) og\u0142oszenie w bazie.</p> <p>Parametry: - <code>Announcement $announcement</code> - Agregat do zapisania</p> <p>Efekty: - INSERT je\u015bli <code>$announcement-&gt;id === null</code> - UPDATE je\u015bli <code>$announcement-&gt;id !== null</code></p> <p>SQL: <pre><code>-- INSERT\nINSERT INTO announcements (\n    title, text, created_at, valid_until, user_id, status, decided_at, decided_by\n) VALUES (...)\n\n-- UPDATE\nUPDATE announcements SET \n    title = ?, text = ?, status = ?, decided_at = ?, decided_by = ?\nWHERE id = ?\n</code></pre></p> <p>Wyj\u0105tki: - <code>DatabaseException</code> - B\u0142\u0105d SQL - <code>ConstraintViolationException</code> - Naruszenie constraint'a</p> <p>U\u017cycie: <pre><code>$announcement = Announcement::createNew(...);\n$repository-&gt;save($announcement);\n</code></pre></p>"},{"location":"layers/infrastructure/#findbyidint-id-announcement","title":"findById(int $id): ?Announcement","text":"<p>Pobierz og\u0142oszenie po ID.</p> <p>Parametry: - <code>int $id</code> - ID og\u0142oszenia</p> <p>Zwraca:  - <code>Announcement</code> - Znalezione og\u0142oszenie - <code>null</code> - Je\u015bli nie znalezione</p> <p>SQL: <pre><code>SELECT * FROM announcements WHERE id = ? LIMIT 1\n</code></pre></p>"},{"location":"layers/infrastructure/#findall-array","title":"findAll(): array","text":"<p>Pobierz wszystkie og\u0142oszenia.</p> <p>Zwraca: <code>array&lt;Announcement&gt;</code></p>"},{"location":"layers/infrastructure/#findbystatusstring-status-array","title":"findByStatus(string $status): array","text":"<p>Pobierz og\u0142oszenia o okre\u015blonym statusie.</p> <p>Parametry: - <code>string $status</code> - Status (pending/approved/rejected)</p> <p>Zwraca: <code>array&lt;Announcement&gt;</code></p>"},{"location":"layers/infrastructure/#findvalid-array","title":"findValid(): array","text":"<p>Pobierz tylko wa\u017cne og\u0142oszenia (approved i jeszcze nieugas\u0142e).</p> <p>Zwraca: <code>array&lt;Announcement&gt;</code> - Aktualnie widoczne</p> <p>SQL: <pre><code>SELECT * FROM announcements \nWHERE status = 'approved' \nAND valid_until &gt;= NOW()\nORDER BY created_at DESC\n</code></pre></p>"},{"location":"layers/infrastructure/#deleteint-id-void","title":"delete(int $id): void","text":"<p>Usu\u0144 og\u0142oszenie.</p> <p>Parametry: - <code>int $id</code> - ID do usuni\u0119cia</p>"},{"location":"layers/infrastructure/#databaseuserrepository","title":"DatabaseUserRepository","text":"<p>Lokalizacja: <code>src/Infrastructure/Repository/DatabaseUserRepository.php</code></p> <p>Zarz\u0105dza persystencj\u0105 u\u017cytkownik\u00f3w.</p>"},{"location":"layers/infrastructure/#saveuser-user-void","title":"save(User $user): void","text":"<p>Zapisz u\u017cytkownika.</p>"},{"location":"layers/infrastructure/#findbyidint-id-user","title":"findById(int $id): ?User","text":"<p>Pobierz po ID.</p>"},{"location":"layers/infrastructure/#findbyemailstring-email-user","title":"findByEmail(string $email): ?User","text":"<p>Pobierz po email.</p>"},{"location":"layers/infrastructure/#existsemailstring-email-bool","title":"existsEmail(string $email): bool","text":"<p>Sprawd\u017a czy email istnieje.</p>"},{"location":"layers/infrastructure/#databasewordrepository","title":"DatabaseWordRepository","text":"<p>Zarz\u0105dza s\u0142owami dnia.</p>"},{"location":"layers/infrastructure/#databasequoterepository","title":"DatabaseQuoteRepository","text":"<p>Zarz\u0105dza cytatami.</p>"},{"location":"layers/infrastructure/#external-services","title":"\ud83d\udd17 External Services","text":"<p>Serwisy integruj\u0105ce si\u0119 z zewn\u0119trznymi API.</p>"},{"location":"layers/infrastructure/#externalwordapiservice","title":"ExternalWordApiService","text":"<p>Lokalizacja: <code>src/Infrastructure/Service/ExternalWordApiService.php</code></p> <p>Odpowiedzialno\u015b\u0107: Pobieranie s\u0142\u00f3w z zewn\u0119trznego API</p> <p>Zale\u017cno\u015bci: <pre><code>public function __construct(\n    private HttpClient $httpClient,\n    private ConfigService $config\n)\n</code></pre></p>"},{"location":"layers/infrastructure/#fetchdailyword-word","title":"fetchDailyWord(): Word","text":"<p>Pobierz s\u0142owo dnia z zewn\u0119trznego API.</p> <p>Zwraca: <code>Word</code> - Transformowane do Domain Entity</p> <p>Flow: 1. HTTP GET do external API 2. Parse response 3. Walidacja 4. Transformacja do Word Entity 5. Return</p> <p>Wyj\u0105tki: - <code>ExternalServiceException</code> - Problem z API - <code>HttpException</code> - B\u0142\u0105d HTTP - <code>InvalidResponseException</code> - B\u0142\u0119dna struktura danych</p> <p>HTTP: <pre><code>GET https://api.external.com/word/daily\nAccept: application/json\nAuthorization: Bearer {token}\n</code></pre></p> <p>Response: <pre><code>{\n  \"word\": \"ephemeral\",\n  \"definition\": \"Lasting for a very short time\",\n  \"example\": \"The beauty of cherry blossoms is ephemeral\",\n  \"language\": \"en\"\n}\n</code></pre></p> <p>U\u017cycie: <pre><code>// W CLI Command lub UseCase\n$word = $this-&gt;wordService-&gt;fetchDailyWord();\n$this-&gt;wordRepository-&gt;save($word);\n</code></pre></p>"},{"location":"layers/infrastructure/#externalquoteapiservice","title":"ExternalQuoteApiService","text":"<p>Lokalizacja: <code>src/Infrastructure/Service/ExternalQuoteApiService.php</code></p> <p>Pobieranie cytat\u00f3w z zewn\u0119trznego API.</p>"},{"location":"layers/infrastructure/#fetchdailyquote-quote","title":"fetchDailyQuote(): Quote","text":""},{"location":"layers/infrastructure/#emailservice","title":"EmailService","text":"<p>Lokalizacja: <code>src/Infrastructure/Service/EmailService.php</code></p> <p>Odpowiedzialno\u015b\u0107: Wysy\u0142anie emaili</p> <p>Zale\u017cno\u015bci: <pre><code>public function __construct(\n    private SmtpClient $smtpClient,\n    private ConfigService $config\n)\n</code></pre></p>"},{"location":"layers/infrastructure/#sendstring-to-string-subject-string-body-void","title":"send(string $to, string $subject, string $body): void","text":"<p>Wy\u015blij email.</p> <p>Parametry: - <code>string $to</code> - Adres email odbiorcy - <code>string $subject</code> - Temat - <code>string $body</code> - Tre\u015b\u0107 (HTML/Plain)</p> <p>Efekty: Email wys\u0142any via SMTP</p> <p>Wyj\u0105tki: - <code>EmailException</code> - B\u0142\u0105d wysy\u0142ki</p>"},{"location":"layers/infrastructure/#factories","title":"\ud83c\udfed Factories","text":"<p>Fabryki tworz\u0105 kompleksowe obiekty z r\u00f3\u017cnych \u017ar\u00f3de\u0142.</p>"},{"location":"layers/infrastructure/#announcementfactory","title":"AnnouncementFactory","text":"<p>Lokalizacja: <code>src/Infrastructure/Factory/AnnouncementFactory.php</code></p>"},{"location":"layers/infrastructure/#createfromrequestcreateannouncementrequest-request-announcement","title":"createFromRequest(CreateAnnouncementRequest $request): Announcement","text":"<p>Utw\u00f3rz Announcement Entity z Request.</p> <pre><code>public static function createFromRequest(\n    CreateAnnouncementRequest $request,\n    ?int $userId = null\n): Announcement {\n    return Announcement::createNew(\n        title: $request-&gt;title,\n        text: $request-&gt;text,\n        validUntil: new DateTimeImmutable($request-&gt;validUntil),\n        userId: $userId ?? $request-&gt;userId,\n    );\n}\n</code></pre>"},{"location":"layers/infrastructure/#createfromdatabaserowarray-row-announcement","title":"createFromDatabaseRow(array $row): Announcement","text":"<p>Utw\u00f3rz Announcement Entity z rekordu bazy.</p> <pre><code>public static function createFromDatabaseRow(array $row): Announcement {\n    return new Announcement(\n        id: (int) $row['id'],\n        title: $row['title'],\n        text: $row['text'],\n        createdAt: new DateTimeImmutable($row['created_at']),\n        validUntil: new DateTimeImmutable($row['valid_until']),\n        userId: $row['user_id'] ? (int) $row['user_id'] : null,\n        status: AnnouncementStatus::from($row['status']),\n        decidedAt: $row['decided_at'] ? new DateTimeImmutable($row['decided_at']) : null,\n        decidedBy: $row['decided_by'] ? (int) $row['decided_by'] : null,\n    );\n}\n</code></pre>"},{"location":"layers/infrastructure/#security-components","title":"\ud83d\udd10 Security Components","text":"<p>Komponenty bezpiecze\u0144stwa i autentykacji.</p>"},{"location":"layers/infrastructure/#passwordhasher","title":"PasswordHasher","text":"<p>Lokalizacja: <code>src/Infrastructure/Security/PasswordHasher.php</code></p>"},{"location":"layers/infrastructure/#hashstring-password-string","title":"hash(string $password): string","text":"<p>Zahaszuj has\u0142o.</p> <pre><code>public function hash(string $password): string {\n    return password_hash($password, PASSWORD_BCRYPT, [\n        'cost' =&gt; 12\n    ]);\n}\n</code></pre>"},{"location":"layers/infrastructure/#verifystring-password-string-hash-bool","title":"verify(string $password, string $hash): bool","text":"<p>Sprawd\u017a has\u0142o.</p> <pre><code>public function verify(string $password, string $hash): bool {\n    return password_verify($password, $hash);\n}\n</code></pre>"},{"location":"layers/infrastructure/#tokengenerator","title":"TokenGenerator","text":"<p>Lokalizacja: <code>src/Infrastructure/Security/TokenGenerator.php</code></p>"},{"location":"layers/infrastructure/#generatejwtuser-user-int-expiresin-3600-string","title":"generateJWT(User $user, int $expiresIn = 3600): string","text":"<p>Wygeneruj JWT token dla u\u017cytkownika.</p> <pre><code>public function generateJWT(User $user, int $expiresIn = 3600): string {\n    $payload = [\n        'user_id' =&gt; $user-&gt;id,\n        'email' =&gt; $user-&gt;email,\n        'role' =&gt; $user-&gt;role,\n        'iat' =&gt; time(),\n        'exp' =&gt; time() + $expiresIn\n    ];\n\n    return JWT::encode($payload, $this-&gt;secret, 'HS256');\n}\n</code></pre>"},{"location":"layers/infrastructure/#generaterefreshtokenuser-user-string","title":"generateRefreshToken(User $user): string","text":"<p>Wygeneruj refresh token.</p>"},{"location":"layers/infrastructure/#authenticationservice","title":"AuthenticationService","text":"<p>Lokalizacja: <code>src/Infrastructure/Security/AuthenticationService.php</code></p>"},{"location":"layers/infrastructure/#authenticatestring-email-string-password-user","title":"authenticate(string $email, string $password): User","text":"<p>Uwierzytelnij u\u017cytkownika.</p> <pre><code>public function authenticate(string $email, string $password): User {\n    $user = $this-&gt;userRepository-&gt;findByEmail($email);\n\n    if (!$user || !$this-&gt;passwordHasher-&gt;verify($password, $user-&gt;passwordHash)) {\n        throw new InvalidCredentialsException();\n    }\n\n    return $user;\n}\n</code></pre>"},{"location":"layers/infrastructure/#helpers","title":"\ud83d\udee0\ufe0f Helpers","text":"<p>Funkcje pomocnicze.</p>"},{"location":"layers/infrastructure/#datehelper","title":"DateHelper","text":"<p>Lokalizacja: <code>src/Infrastructure/Helper/DateHelper.php</code></p> <pre><code>class DateHelper {\n    public static function now(): DateTimeImmutable {\n        return new DateTimeImmutable();\n    }\n\n    public static function tomorrow(): DateTimeImmutable {\n        return self::now()-&gt;modify('+1 day');\n    }\n\n    public static function addDays(DateTimeImmutable $date, int $days): DateTimeImmutable {\n        return $date-&gt;modify(\"+{$days} days\");\n    }\n\n    public static function isExpired(DateTimeImmutable $date): bool {\n        return $date &lt; self::now();\n    }\n}\n</code></pre>"},{"location":"layers/infrastructure/#stringhelper","title":"StringHelper","text":"<pre><code>class StringHelper {\n    public static function slugify(string $text): string {\n        return strtolower(preg_replace('/[^a-z0-9]+/', '-', trim($text)));\n    }\n\n    public static function truncate(string $text, int $length = 100): string {\n        if (strlen($text) &lt;= $length) return $text;\n        return substr($text, 0, $length) . '...';\n    }\n}\n</code></pre>"},{"location":"layers/infrastructure/#validationhelper","title":"ValidationHelper","text":"<pre><code>class ValidationHelper {\n    public static function isValidEmail(string $email): bool {\n        return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;\n    }\n\n    public static function isValidUrl(string $url): bool {\n        return filter_var($url, FILTER_VALIDATE_URL) !== false;\n    }\n}\n</code></pre>"},{"location":"layers/infrastructure/#translation-service","title":"\ud83c\udf10 Translation Service","text":"<p>Obs\u0142uga wieloj\u0119zyczno\u015bci.</p>"},{"location":"layers/infrastructure/#translationservice","title":"TranslationService","text":"<p>Lokalizacja: <code>src/Infrastructure/Translation/TranslationService.php</code></p> <pre><code>public function translate(string $key, string $locale = 'pl'): string {\n    $messages = $this-&gt;loadMessages($locale);\n    return $messages[$key] ?? $key;\n}\n\npublic function t(string $key, array $params = [], string $locale = 'pl'): string {\n    $message = $this-&gt;translate($key, $locale);\n    foreach ($params as $key =&gt; $value) {\n        $message = str_replace(\":$key\", $value, $message);\n    }\n    return $message;\n}\n</code></pre> <p>U\u017cycie: <pre><code>$this-&gt;translator-&gt;t('announcement.created', ['title' =&gt; $announcement-&gt;title]);\n// \"Og\u0142oszenie 'Nowa promocja' zosta\u0142o utworzone\"\n</code></pre></p>"},{"location":"layers/infrastructure/#dependency-injection-container","title":"\ud83d\ude9a Dependency Injection Container","text":""},{"location":"layers/infrastructure/#containerphp","title":"Container.php","text":"<p>Lokalizacja: <code>src/Infrastructure/Container.php</code></p> <p>Zarz\u0105dzanie zale\u017cno\u015bciami i lifecycle'em obiekt\u00f3w.</p> <pre><code>class Container {\n    private array $services = [];\n    private array $singletons = [];\n\n    public function register(string $id, mixed $definition): void {\n        $this-&gt;services[$id] = $definition;\n    }\n\n    public function singleton(string $id, callable $definition): void {\n        $this-&gt;singletons[$id] = $definition;\n    }\n\n    public function get(string $id): mixed {\n        if (isset($this-&gt;singletons[$id])) {\n            // Zwr\u00f3\u0107 ten sam instancj\u0119\n            return $this-&gt;singletons[$id]($this);\n        }\n\n        if (isset($this-&gt;services[$id])) {\n            return $this-&gt;services[$id]($this);\n        }\n\n        throw new ServiceNotFoundException($id);\n    }\n}\n</code></pre>"},{"location":"layers/infrastructure/#rejestracja-serwisow","title":"Rejestracja Serwis\u00f3w","text":"<pre><code>// src/bootstrap/services.php\n$container-&gt;singleton(PDO::class, function(Container $c) {\n    return new PDO(\n        'pgsql:host=localhost;dbname=dodomudojade',\n        'ddd',\n        $_ENV['DB_PASSWORD']\n    );\n});\n\n$container-&gt;singleton(AnnouncementRepository::class, function(Container $c) {\n    return new DatabaseAnnouncementRepository($c-&gt;get(PDO::class));\n});\n\n$container-&gt;singleton(CreateAnnouncementUseCase::class, function(Container $c) {\n    return new CreateAnnouncementUseCase(\n        $c-&gt;get(AnnouncementRepository::class),\n    );\n});\n</code></pre>"},{"location":"layers/infrastructure/#uzycie-w-controller","title":"U\u017cycie w Controller","text":"<pre><code>class AnnouncementController {\n    public function __construct(\n        private Container $container\n    ) {}\n\n    public function create(Request $request): Response {\n        $useCase = $this-&gt;container-&gt;get(CreateAnnouncementUseCase::class);\n        $dto = $useCase-&gt;execute($request);\n        return Response::created($dto);\n    }\n}\n</code></pre>"},{"location":"layers/infrastructure/#architektura-warstwowa","title":"\ud83d\udcca Architektura Warstwowa","text":"<pre><code>Presentation (Http, Console)\n        \u2193\n    (uses)\n        \u2193\nApplication (UseCase, DTO)\n        \u2193\n    (uses)\n        \u2193\nDomain (Entity, ValueObject, Enum)\n   \u2191    \u2191\n   |    |\n(implements)\n   |    |\nInfrastructure (Repository, Service)\n</code></pre>"},{"location":"layers/infrastructure/#best-practices","title":"\ud83c\udf93 Best Practices","text":""},{"location":"layers/infrastructure/#do","title":"\u2705 DO","text":"<ol> <li> <p>Implementuj Repository interfaces (Future) <pre><code>interface AnnouncementRepository {\n    public function save(Announcement $announcement): void;\n    public function findById(int $id): ?Announcement;\n}\n</code></pre></p> </li> <li> <p>U\u017cyj Factories dla kompleksowych obiekt\u00f3w <pre><code>$entity = AnnouncementFactory::createFromDatabaseRow($row);\n</code></pre></p> </li> <li> <p>Abstrakcjonuj external API calls <pre><code>interface WordApiService {\n    public function fetchDailyWord(): Word;\n}\n</code></pre></p> </li> <li> <p>Zarz\u0105dzaj transakcjami <pre><code>$this-&gt;pdo-&gt;beginTransaction();\ntry {\n    $this-&gt;repository-&gt;save($entity);\n    $this-&gt;pdo-&gt;commit();\n} catch (Exception $e) {\n    $this-&gt;pdo-&gt;rollBack();\n    throw $e;\n}\n</code></pre></p> </li> <li> <p>Loguj wa\u017cne operacje <pre><code>$this-&gt;logger-&gt;info(\"Announcement approved\", ['id' =&gt; $announcement-&gt;id]);\n</code></pre></p> </li> </ol>"},{"location":"layers/infrastructure/#dont","title":"\u274c DON'T","text":"<ol> <li> <p>Nie r\u00f3b logiki biznesowej w Repository <pre><code>// \u274c WRONG\npublic function save(Announcement $announcement): void {\n    if ($announcement-&gt;title == '') throw new Exception();\n}\n</code></pre></p> </li> <li> <p>Nie korzystaj z SQL w Service <pre><code>// \u274c WRONG - Use Repository\n$this-&gt;pdo-&gt;query(\"SELECT...\");\n</code></pre></p> </li> <li> <p>Nie importuj Application w Infrastructure <pre><code>// \u274c WRONG\nuse App\\Application\\UseCase\\CreateAnnouncementUseCase;\n</code></pre></p> </li> <li> <p>Nie cache'uj obiekty bez namys\u0142u <pre><code>// \u26a0\ufe0f CAREFUL - Use singleton pattern\nprivate $announcement; // Will be stale!\n</code></pre></p> </li> </ol>"},{"location":"layers/infrastructure/#mapowanie-warstw","title":"\ud83d\udcca Mapowanie Warstw","text":"Warstwa Komponenty Odpowiedzialno\u015b\u0107 Domain Entity, ValueObject Logika biznesowa Application UseCase, DTO Orkiestracja Infrastructure Repository, Service Techniczne szczeg\u00f3\u0142y Presentation Controller, Command Interfejsy u\u017cytkownika"}]}